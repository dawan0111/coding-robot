(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{41:function(e,n,t){},46:function(e,n,t){"use strict";t.r(n);var r=t(1),i=t(0),c=t.n(i),a=t(28),u=t.n(a),o=(t(41),t(3)),d=t(50),s=t(34),f=t(4),j=t(8),l=t(7),b=t(5),g=t(29),p=t.n(g),x=navigator,O=c.a.createContext({}),h=O;function v(e){var n=e.children,t=c.a.useState("mapEdit"),i=Object(b.a)(t,2),a=i[0],u=i[1],o=c.a.useState([]),d=Object(b.a)(o,2),s=d[0],f=d[1],g=c.a.useState(!1),h=Object(b.a)(g,2),v=h[0],m=h[1],y=c.a.useState(1/0),C=Object(b.a)(y,2),w=C[0],D=C[1],k=c.a.useMemo((function(){return s.find((function(e){return!0===e.temp}))}),[s]),I=c.a.useCallback((function(e){var n=0;f(e.reduce((function(e,t){return[].concat(Object(l.a)(e),[{type:t.type,index:n++,temp:!1}])}),[]))}),[]),S=c.a.useCallback((function(e,n){f((function(t){return[].concat(Object(l.a)(t),[{type:e,index:t.length,temp:void 0!==n}])}))}),[]),Q=c.a.useCallback((function(e,n){f((function(t){return t.map((function(t){return t.index===e?t:Object(j.a)(Object(j.a)({},t),n)}))}))}),[]),T=c.a.useCallback((function(e){I(s.filter((function(n){return n.index!==e})))}),[I,s]),E=c.a.useCallback((function(e){I(s.filter((function(n){return n.index<e})))}),[I,s]),z=c.a.useCallback((function(e,n){var t=s.filter((function(n){return n.index>=e})),r=p.a.findIndex(s,["index",n]),i=s.reduce((function(n,i,c){return r===c&&(n=[].concat(Object(l.a)(n),Object(l.a)(t))),i.index>=e?n:[].concat(Object(l.a)(n),[i])}),[]);-1===r&&(i=[].concat(Object(l.a)(i),Object(l.a)(t))),f(i)}),[s]),F=c.a.useCallback((function(){x.bluetooth.requestDevice({filters:[{services:[65504]}]}).then((function(e){return e.gatt.connect()})).then((function(e){return e.getPrimaryService(65504)})).then((function(e){return e.getCharacteristic(65505)})).then((function(e){m(!0);var n=new Uint8Array([187,37,5,68]);return e.writeValue(n)})).catch((function(e){console.error("Connection failed!",e)}))}),[]),B=c.a.useCallback((function(e){D(e)}),[]);return Object(r.jsx)(O.Provider,{value:{page:a,queue:s,tempQueue:k,bluetoothConnect:v,draggingIndex:w,changePage:u,addQueue:S,updateQueue:Q,deleteQueue:T,deleteNextQueue:E,replaceQueue:z,reSortSetQueue:I,setBluetoothDevice:F,changeDraggingIndex:B},children:n})}function m(){var e=Object(o.a)(["\n  width: 50%;\n  height: 80%;\n\n  border-radius: 2rem;\n  background: #999;\n  border: 1rem solid #fff;\n\n  padding-top: 1rem;\n\n  & > img {\n    width: auto;\n    height: 100%;\n  }\n"]);return m=function(){return e},e}var y=f.a.div(m());function C(){return Object(r.jsx)(y,{})}function w(){var e=Object(o.a)(["\n  border: none;\n  background: none;\n\n  color: ",";\n  opacity: ",";\n\n  &:focus {\n    outline: none;\n  }\n"]);return w=function(){return e},e}var D=f.a.button(w(),(function(e){return e.connect?"#0983fe":"#000"}),(function(e){return e.connect?1:.2}));function k(){var e=c.a.useContext(h),n=e.bluetoothConnect,t=e.setBluetoothDevice;return Object(r.jsx)(D,{connect:n,onClick:function(){return t()},children:Object(r.jsx)("span",{className:"material-icons",children:"bluetooth"})})}var I=t(52),S=t(48),Q=t(51),T=t(21),E=t.p+"static/media/start.6df7bebe.svg",z=t.p+"static/media/left-rotate.f9db7149.svg",F=t.p+"static/media/right-rotate.4443e6b6.svg",B=t.p+"static/media/go.b28a9fae.svg";function P(){var e=Object(o.a)(["\n  position: relative;\n  width: 2.425rem;\n  height: 2.5rem;\n  font-size: 0;\n\n  img {\n    width: auto;\n    height: 100%;\n  }\n"]);return P=function(){return e},e}var q=f.a.div(P()),N=c.a.forwardRef((function(e,n){var t=e.type,i=Object(T.a)(e,["type"]);return Object(r.jsxs)(q,Object(j.a)(Object(j.a)({},i),{},{children:["start"===t&&Object(r.jsx)("img",{src:E,alt:"\uc2dc\uc791 \uc774\ubbf8\uc9c0"}),"go"===t&&Object(r.jsx)("img",{src:B,alt:"\uc9c1\uc9c4"}),"left-rotate"===t&&Object(r.jsx)("img",{src:z,alt:"\uc67c\ucabd\uc73c\ub85c 90\ub3c4 \ud68c\uc804"}),"right-rotate"===t&&Object(r.jsx)("img",{src:F,alt:"\uc624\ub978\ucabd\uc73c\ub85c 90\ub3c4 \ud68c\uc804"})]}))}));function R(e){var n=e.type,t=(e.val,Object(Q.a)({item:{type:"card",data:{type:n}},collect:function(e){return{isDragging:e.isDragging()}}})),i=Object(b.a)(t,3),a=(i[0].isDragging,i[1]),u=i[2];return c.a.useEffect((function(){u(Object(S.a)(),{captureDraggingState:!0})}),[]),Object(r.jsx)("div",{ref:a,children:Object(r.jsx)(N,{type:n})})}var A=t.p+"static/media/play.b9298dae.svg";function G(e){var n=e.type,t=e.index,i=e.withDragging,a=e.moveCard,u=e.changeDraggingIndex,o=e.dropCard,d=e.updateCard,s=c.a.useRef(null),f=Object(I.a)({accept:["card","sortCard"],drop:function(){o()},hover:function(e,n){var r=e.index,i=t;if("sortCard"===e.type){var c;if(!s.current)return;var u=null===(c=s.current)||void 0===c?void 0:c.getBoundingClientRect(),o=(u.bottom-u.top)/2,f=n.getClientOffset().y-u.top;if(r<i&&f<o||r>i&&f>o)return;a(r,i)}else"card"===e.type&&d(i)}}),j=Object(b.a)(f,2)[1],l=Object(Q.a)({item:{type:"sortCard",index:t,sort:!0,data:{type:n}},begin:function(e){u(t)},end:function(){u(1/0)},collect:function(e){return{isDragging:e.isDragging()}}}),g=Object(b.a)(l,3),p=g[0].isDragging,x=g[1],O=g[2];c.a.useEffect((function(){O(Object(S.a)(),{captureDraggingState:!0})}),[]),x(j(s));var h=p||i?.5:1;return Object(r.jsx)("div",{ref:s,style:{opacity:h},children:Object(r.jsx)(N,{type:n})})}function J(){var e=Object(o.a)(["\n  display: flex;\n  flex: 1;\n  font-size: 0;\n"]);return J=function(){return e},e}var L=f.a.div(J());function M(e){var n=e.cards,t=e.draggingIndex,i=Object(T.a)(e,["cards","draggingIndex"]);return Object(r.jsx)(L,{children:n.map((function(e,n){return Object(r.jsx)("div",{style:{position:"relative",opacity:e.temp?.5:1},children:Object(r.jsx)(G,Object(j.a)(Object(j.a)({},i),{},{withDragging:e.index>=t,type:e.type,index:n}))},e.index)}))})}function U(e){var n=e.cards;return Object(r.jsx)(L,{children:n.map((function(e,n){return Object(r.jsx)("div",{style:{position:"relative",left:"".concat(-.38*(n+1),"rem")},children:Object(r.jsx)(N,{type:e.type})},n)}))})}function V(){var e=Object(o.a)(["\n  position: relative;\n  bottom: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  height: 100%;\n\n  background: #f6941b;\n  border-radius: 50%;\n\n  transition: 150ms ease;\n\n  img {\n    width: 30%;\n  }\n"]);return V=function(){return e},e}function W(){var e=Object(o.a)(["\n  position: relative;\n  z-index: 2;\n  width: 3.5rem;\n  height: 3.5rem;\n  border-radius: 50%;\n  font-size: 0;\n\n  &:before {\n    position: absolute;\n    z-index: -1;\n    left: 0;\n    bottom: -.25rem;\n    width: 100%;\n    height: 100%;\n\n    border-radius: 50%;\n\n    background: #db7e19;\n    content: '';\n  }\n"]);return W=function(){return e},e}function H(){var e=Object(o.a)(["\n  flex: 1;\n  font-size: 0;\n"]);return H=function(){return e},e}function K(){var e=Object(o.a)(["\n  display: flex;\n  flex-wrap: nowrap;\n  width: 60%;\n  overflow: auto;\n\n  box-shadow: inset 1px 1px 1px rgba(0, 0, 0, .5);\n  border-radius: 100rem;\n\n  padding-top: .5rem;\n  padding-bottom: .5rem;\n  padding-left: .8rem;\n  padding-right: .8rem;\n\n  margin-right: 1rem;\n\n  background: #72d4c7;\n"]);return K=function(){return e},e}function X(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n"]);return X=function(){return e},e}var Y=f.a.div(X()),Z=f.a.div(K()),$=f.a.div(H()),_=f.a.div(W()),ee=f.a.div(V(),(function(e){return e.pushing?"-0.25rem":"0"}));function ne(){var e=c.a.useContext(h),n=e.queue,t=e.tempQueue,i=e.draggingIndex,a=e.addQueue,u=(e.updateQueue,e.deleteQueue),o=e.replaceQueue,d=e.changeDraggingIndex,s=e.reSortSetQueue,f=c.a.useState(!1),j=Object(b.a)(f,2),g=j[0],p=j[1],x=Object(I.a)({accept:"card",drop:function(e,t){s(n)},collect:function(e){return{hovered:e.isOver(),item:e.getItem()}}}),O=Object(b.a)(x,2),v=O[0],m=v.hovered,y=v.item,C=O[1];return c.a.useEffect((function(){!t&&m?a(y.data.type,!0):t&&!m&&u(t.index)}),[y,a,u,t,m]),Object(r.jsxs)(Y,{children:[Object(r.jsxs)(Z,{children:[Object(r.jsx)(N,{type:"start"}),Object(r.jsx)($,{ref:C,children:Object(r.jsx)(M,{draggingIndex:i,cards:[].concat(Object(l.a)(n),[{type:"temp",index:n.length,temp:!1}]),updateCard:function(e){t&&o(t.index,e)},dropCard:function(){return s(n)},changeDraggingIndex:d,moveCard:o,addingCard:function(e){}})})]}),Object(r.jsx)(_,{onTouchStart:function(){return p(!0)},onTouchEnd:function(){return p(!1)},children:Object(r.jsx)(ee,{pushing:g,children:Object(r.jsx)("img",{src:A,alt:"play"})})})]})}function te(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: center;\n  box-shadow: inset 0px 1px 1px rgba(0, 0, 0, .5);\n\n  width: 100%;\n  padding-top: .5rem;\n  padding-bottom: .5rem;\n  background: #48baa4;\n\n  & > div {\n    margin-left: .2rem;\n    margin-right: .2rem;\n  }\n"]);return te=function(){return e},e}function re(){var e=Object(o.a)(["\n  \n  width: 100%;\n  bottom: 100%;\n"]);return re=function(){return e},e}function ie(){var e=Object(o.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: center;\n  width: 100%;\n"]);return ie=function(){return e},e}var ce=f.a.div(ie()),ae=f.a.div(re()),ue=f.a.div(te()),oe=["go","left-rotate","right-rotate"];function de(){var e=c.a.useContext(h).deleteNextQueue,n=Object(I.a)({accept:"sortCard",drop:function(n){e(n.index)}}),t=Object(b.a)(n,2)[1];return Object(r.jsxs)(ce,{children:[Object(r.jsx)(ae,{children:Object(r.jsx)(ne,{})}),Object(r.jsx)(ue,{ref:t,children:oe.map((function(e,n){return Object(r.jsx)(R,{val:n,type:e},n)}))})]})}var se=t(49),fe={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"};function je(e,n,t){if(!e||!n)return{display:"none"};var r=n.x,i=n.y,c="translate(".concat(r,"px, ").concat(i,"px)");return{transform:c,WebkitTransform:c}}var le=function(e){var n=c.a.useContext(h),t=n.queue,i=n.draggingIndex,a=Object(se.a)((function(e){return{item:e.getItem(),itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}})),u=a.itemType,o=a.isDragging,d=a.item,s=a.initialOffset,f=a.currentOffset;return o?Object(r.jsx)("div",{style:fe,children:Object(r.jsx)("div",{style:je(s,f,e.snapToGrid),children:function(){switch(u){case"card":return Object(r.jsx)(N,{type:d.data.type});case"sortCard":return Object(r.jsx)(U,{cards:t.filter((function(e){return e.index>=i}))});default:return null}}()})}):null};function be(){var e=Object(o.a)(["\n  position: absolute;\n  right: 1rem;\n  top: 1rem;\n"]);return be=function(){return e},e}function ge(){var e=Object(o.a)(["\n  width: 100%;\n"]);return ge=function(){return e},e}function pe(){var e=Object(o.a)(["\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  width: 100%;\n"]);return pe=function(){return e},e}function xe(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  width: 100%;\n  height: 100%;\n\n  background: #99eadf;\n"]);return xe=function(){return e},e}var Oe=f.a.div(xe()),he=f.a.div(pe()),ve=f.a.div(ge()),me=f.a.div(be());function ye(){var e=c.a.useContext(h).page;return Object(r.jsx)(r.Fragment,{children:"game"===e&&Object(r.jsxs)(Oe,{children:[Object(r.jsxs)(he,{children:[Object(r.jsx)(me,{children:Object(r.jsx)(k,{})}),Object(r.jsx)(C,{})]}),Object(r.jsx)(ve,{children:Object(r.jsx)(de,{})})]})})}function Ce(){var e=c.a.useContext(h).page;return Object(r.jsx)(r.Fragment,{children:"mapEdit"===e&&Object(r.jsxs)(Oe,{children:[Object(r.jsxs)(he,{children:[Object(r.jsx)(me,{children:Object(r.jsx)(k,{})}),Object(r.jsx)(C,{})]}),Object(r.jsx)(ve,{children:Object(r.jsx)(de,{})})]})})}function we(){return Object(r.jsx)(v,{children:Object(r.jsxs)(d.a,{backend:s.a,children:[Object(r.jsx)(le,{snapToGrid:!1}),Object(r.jsx)(ye,{}),Object(r.jsx)(Ce,{})]})})}var De=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(we,{})})},ke=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,53)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),r(e),i(e),c(e),a(e)}))};u.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(De,{})}),document.getElementById("root")),ke(console.log)}},[[46,1,2]]]);
//# sourceMappingURL=main.f1f45308.chunk.js.map