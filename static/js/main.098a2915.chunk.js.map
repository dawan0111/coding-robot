{"version":3,"sources":["sounds/bgm2.wav","sounds/drop.wav","types/coin.ts","contexts/GameContext.tsx","images/igloo.svg","images/penguin.svg","components/game/MapIcon.tsx","images/bg-right.png","components/game/Map.tsx","components/game/BluetoothButton.tsx","images/start.svg","contexts/AudioContext.tsx","components/card/SortableCard.tsx","components/card/CardList.tsx","components/card/ForCard.tsx","images/for-start.png","images/for-end.png","components/card/Card.tsx","images/go.png","images/left-rotate.png","images/right-rotate.png","components/card/DraggableCard.tsx","components/game/PlayButton.tsx","images/play.svg","images/reset.svg","components/game/QueueControl.tsx","components/game/Control.tsx","components/game/CustomDragLayer.tsx","components/game/MapEdit.tsx","components/game/MapEditControl.tsx","style.ts","components/game/ResultModal.tsx","components/Game.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["coins","isStartCoin","coin","includes","windowNavigator","navigator","GameContext","React","createContext","defaultMap","Array","MAP_X","fill","GameContextProvider","children","useState","page","setPage","queue","setQueue","localStorage","getItem","JSON","parse","map","setMap","activeMap","setActiveMap","resultVisible","setResultVisible","ranking","setRanking","queueId","setQueueId","bluetoothConnect","setBluetoothConnect","device","setDevice","Infinity","draggingIndex","setDraggingIndex","playArray","setPlayArray","score","useMemo","length","tempQueue","find","x","temp","mapStartIndex","findIndex","mapEndIndex","reSortSetQueue","useCallback","filter","val","index","reduce","acc","addQueue","type","parent","undefined","updateQueue","payload","deleteQueue","changeQueue","del","forEach","deleteNextQueue","getQueueDeps","deps","findQueue","_","replaceQueue","droppingIndex","isFor","isRight","middleQueue","movingQueue","changeParent","isFront","slice","setBluetoothDevice","bluetooth","requestDevice","filters","services","then","addEventListener","alert","gatt","connect","server","getPrimaryService","service","getCharacteristic","characteristic","startNotifications","console","log","catch","error","sendQueueData","hasingType","flatArray","cardFlatArray","queueP","loopCount","document","getElementById","childrens","Number","value","push","data","Uint8Array","writeValue","sendResetMessage","changeDraggingIndex","putMap","updateMap","_map","_index","saveMap","setItem","stringify","moveRabbit","cardIndex","direction","move","moveIndex","action","addRanking","name","_ranking","hashKey","updateResultVisible","bool","gameEnd","useEffect","handleChanged","e","target","getUint8","toString","removeEventListener","Provider","mapX","mapY","changePage","changeActiveMap","getRotate","MapIcon","src","iglooImage","alt","className","style","position","zIndex","width","height","display","alignItems","justifyContent","left","top","transform","penguinImage","MapGrid","styled","div","MapBgRight","props","Math","floor","y","MapGridItem","active","odd","Map","editable","useContext","onClick","Button","button","BluetoothButton","soundMapper","require","default","AudioPlayerContext","AudioPlayerProvider","soundWrapperRef","useRef","getAudioElement","id","current","querySelector","play","options","audio","loop","Boolean","paused","pause","currentTime","stop","handleStopMusic","Object","keys","key","ref","entries","data-id","SortableCard","useDrop","accept","hover","item","monitor","isOverCurrent","hoverCard","hoverIndex","hoverBoundingRect","getBoundingClientRect","clientOffset","getClientOffset","hoverWidth","right","hoverClientX","tempQueueIndex","drop","didDrop","collect","hovered","isOver","shallow","useDrag","aIndex","sort","begin","end","isDragging","drag","opacity","Wrapper","SortCardList","queues","k","ForWrapper","ForStack","ForRangeInput","input","ForCard","defaultValue","Item","forwardRef","startImg","DraggableCard","preview","getEmptyImage","captureDraggingState","PlayBtn","PlayBtnWrapper","pushing","reset","PlayButton","setPushing","onTouchStart","onTouchEnd","QueueForm","QueueWrapper","QueueScrollControl","isLeft","Queue","QueueControl","scrollLeft","playImg","resetImg","QueueControlWrapper","ItemWrapper","usingCards","Control","card","layerStyles","pointerEvents","getItemStyles","initialOffset","currentOffset","isSnapToGrid","WebkitTransform","CustomDragLayer","useDragLayer","itemType","getItemType","getInitialSourceClientOffset","getSourceClientOffset","snapToGrid","renderItem","MapEditWrapper","MapEdit","EditButton","Modal","visible","ModalPopup","Title","success","ScoreWrapper","RankingWrapper","RankingList","RankingItem","RankingForm","form","RankingInput","RankingButton","ActionButton","ResultModal","setName","rankingAdd","setRankingAdd","isSuccess","mapRanking","orderBy","rank","onSubmit","preventDefault","readOnly","onChange","placeholder","disabled","MapWrapper","ControlWrapper","StatusBar","StartWrapper","MapScreen","SettingButton","BackButton","GameStart","GamePlay","Game","HTML5toTouch","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"gHAAA,OAAe,cAA0B,kC,gCCAzC,OAAe,cAA0B,kC,gKCC5BA,EAAqB,CAAC,YAAa,aAAc,cAAe,WAAY,aAAc,SAEhG,SAASC,EAAYC,GAC1B,MAAO,CAAC,aAAc,cAAe,WAAY,cAAcC,SAASD,GCG1E,IAEME,EAAuBC,UAiDvBC,EAAcC,IAAMC,cAAc,IAEzBF,IAITG,EAAaC,MAAMC,IAAeC,KAAK,SAGtC,SAASC,EAAT,GAAyE,IAA1CC,EAAyC,EAAzCA,SAAyC,EACrDP,IAAMQ,SAAgB,aAD+B,mBACtEC,EADsE,KAChEC,EADgE,OAEnDV,IAAMQ,SAAsB,IAFuB,mBAEtEG,EAFsE,KAE/DC,EAF+D,OAGvDZ,IAAMQ,SAC1BK,aAAaC,QAAQ,OAASC,KAAKC,MAAMH,aAAaC,QAAQ,QAAU,MAAQZ,GAJL,mBAGtEe,EAHsE,KAGjEC,EAHiE,OAM3ClB,IAAMQ,UAAkB,GANmB,mBAMtEW,EANsE,KAM3DC,EAN2D,OAOnCpB,IAAMQ,UAAS,GAPoB,mBAOtEa,EAPsE,KAOvDC,EAPuD,OAS/CtB,IAAMQ,SAASO,KAAKC,MAAMH,aAAaC,QAAQ,YAAc,OATd,mBAStES,EATsE,KAS7DC,EAT6D,OAU/CxB,IAAMQ,SAAS,GAVgC,mBAUtEiB,EAVsE,KAU7DC,EAV6D,OAW7B1B,IAAMQ,UAAS,GAXc,mBAWtEmB,EAXsE,KAWpDC,EAXoD,OAYjD5B,IAAMQ,SAAc,MAZ6B,mBAYtEqB,EAZsE,KAY9DC,EAZ8D,OAanC9B,IAAMQ,SAASuB,KAboB,mBAatEC,EAbsE,KAavDC,EAbuD,OAe3CjC,IAAMQ,SAAS,IAf4B,mBAetE0B,GAfsE,KAe3DC,GAf2D,KAiBvEC,GAAQpC,IAAMqC,SAAQ,kBAC1B,IAAsB,IAAf1B,EAAM2B,SACZ,CAAC3B,IAEE4B,GAAYvC,IAAMqC,SAAQ,kBAC9B1B,EAAM6B,MAAK,SAAAC,GAAC,OAAe,IAAXA,EAAEC,UACjB,CAAC/B,IAEEgC,GAAgB3C,IAAMqC,SAAQ,kBAClCpB,EAAI2B,UAAUlD,KACb,CAACuB,IAEE4B,GAAc7C,IAAMqC,SAAQ,kBAChCpB,EAAI2B,WAAU,SAACjD,GAAD,MAAmB,cAATA,OACvB,CAACsB,IAEE6B,GAAiB9C,IAAM+C,aAAY,SAACpC,GACxCC,EACED,EAAMqC,QAAO,SAAAC,GAAG,OAAIA,EAAIC,QAAUnB,OAAUoB,QAAO,SAACC,EAAKH,GAAN,4BAC7CG,GAD6C,aAAC,eAE7CH,GAF4C,IAG/CP,MAAM,QAEP,OAEJ,IAEGW,GAAWrD,IAAM+C,aAAY,SAACO,EAAgBC,EAAiBb,GACnE9B,GAAS,SAAAD,GAAK,4BACTA,GADS,CAEZ,CACE2C,OACAC,SACAL,MAAOzB,EACPiB,UAAec,IAATd,QAGVhB,EAAWD,EAAU,KACpB,CAACA,IAEEgC,GAAczD,IAAM+C,aAAY,SAACG,EAAeQ,GACpD9C,GAAS,SAAAD,GAAK,OAAKA,EAAMM,KAAI,SAAAwB,GAAC,OAAIA,EAAES,QAAUA,EAAQT,EAApB,2BAC7BA,GACAiB,WAEJ,IAEGC,GAAc3D,IAAM+C,aAAY,SAACG,GACrC,IAAIU,EAAwB,YAAOjD,IAEnC,SAAUkD,EAAIX,GACZU,EAAYZ,QAAO,SAAAC,GAAG,OAAIA,EAAIM,SAAWL,KAAOY,SAAQ,SAACb,GACvDY,EAAIZ,EAAIC,UAEVU,EAAcA,EAAYZ,QAAO,SAAAC,GAAG,OAAIA,EAAIC,QAAUA,GAASD,EAAIM,SAAWL,KAJhF,CAKGA,GAEHJ,GAAec,KACd,CAACd,GAAgBnC,IAEdoD,GAAkB/D,IAAM+C,aAAY,SAACG,GACzCJ,GAAenC,EAAMqC,QAAO,SAAAC,GAAG,OAAIA,EAAIC,MAAQA,QAC9C,CAACJ,GAAgBnC,IAEdqD,GAAehE,IAAM+C,aAAY,SAACG,GACtC,IAAIe,EAAO,EAYX,OAVA,SAAUzB,EAAKU,EAAOvC,GACpB,QAAc6C,IAAVN,IAAkC,IAAXA,EAAc,OAAOe,EAChDA,GAAQ,EAER,IAAMC,EAAYC,IAAE3B,KAAK7B,EAAO,CAAC,QAASuC,IACtCgB,GACF1B,EAAK0B,EAAUX,OAAQ5C,GAN3B,CAQGuC,EAAOvC,GAEHsD,IACN,CAACtD,IAEEyD,GAAepE,IAAM+C,aAAY,SAACf,EAAsBqC,EAAsBC,EAAgBC,GAClG,IAIIC,EAJEC,EAAc9D,EAAMqB,GACpB0C,EAAe/D,EAAM0D,GAAed,OACpCK,EAAcjD,EAAMqC,QAAO,SAACP,EAAGS,GAAJ,OAAcA,IAAUlB,GAAiBS,EAAES,QAAUnB,OAChF4C,EAAUJ,EAAU,EAAI,EAG9BC,EAAc,CAAC,2BACVC,GADS,IAEZlB,OAAQmB,KAGV9D,EAAS,GAAD,mBACHgD,EAAYgB,MAAM,EAAGP,EAAgBM,IADlC,YAEHH,GAFG,YAGHZ,EAAYgB,MAAMP,EAAgBM,QAEtC,CAAChE,IAEEkE,GAAqB7E,IAAM+C,aAAY,WAC3ClD,EAAgBiF,UAAUC,cAAc,CACtCC,QAAS,CAAC,CAAEC,SAAU,CAAC,WAEtBC,MAAK,SAASrD,GAOb,OANAA,EAAOsD,iBAAiB,0BAA0B,WAChDC,MAAM,qFAENtD,EAAU,MACVF,GAAoB,MAEfC,EAAOwD,KAAKC,aAEpBJ,MAAK,SAASK,GACb,OAAOA,EAAOC,kBAAkB,UAEjCN,MAAK,SAASO,GACb,OAAOA,EAAQC,kBAAkB,UAElCR,MAAK,SAASS,GACb/D,GAAoB,GACpBE,EAAU6D,GACVA,EAAeC,qBAAqBV,MAAK,WACvCW,QAAQC,IAAI,aAGfC,OAAM,SAASC,GACdH,QAAQG,MAAM,qBAAsBA,QAEvC,IAEGC,GAAgBjG,IAAM+C,aAAY,WACtC,IAAuB,IAAnBJ,KAAyC,IAAjBE,GAA5B,CAIA,IAAMqD,EAAuC,CAC3C,GAAM,EACN,cAAe,EACf,eAAgB,EAChB,MAAS,EACT,KAAQ,EACR,OAAU,GAERC,EAAiB,GACjBC,EAAqB,GAmBzB,GAjBA,SAAU5D,EAAK6D,EAAqBnD,GAClC,KAAImD,EAAO/D,QAAUY,GAArB,CACA,GAA2B,QAAvBmD,EAAOnD,GAAOI,KAAgB,CAChC,IAAMgD,EAAYC,SAASC,eAAT,cAA+BH,EAAOnD,GAAOA,QACzDuD,EAAY9F,EAAMqC,QAAO,SAAAP,GAAC,OAAIA,EAAEc,SAAW8C,EAAOnD,GAAOA,SAE3DoD,GACFnG,MAAMuG,OAAOJ,EAAUK,QAAQtG,KAAK,GAAGyD,SAAQ,kBAAMtB,EAAKiE,EAAW,WAGvEN,EAAUS,KAAKV,EAAWG,EAAOnD,GAAOI,OACxC8C,EAAcQ,KAAKP,EAAOnD,GAAOA,OAGnCV,EAAK6D,EAAQnD,EAAQ,IAdvB,CAeGvC,EAAMqC,QAAO,SAAAP,GAAC,YAAiBe,IAAbf,EAAEc,UAAuB,GAE1C4C,EAAU7D,OAAS,GACrB8C,MAAM,wEADR,CAKA,IAAIyB,EAAO,IAAIC,WAAJ,CAAgB,GAAhB,OAAyBX,EAAzB,CAAoC,KAEhC,OAAXtE,IACFA,EAAOkF,WAAWF,GAClB1E,GAAaiE,UAxCbhB,MAAM,wHA0CP,CAACzE,EAAOkB,EAAQc,KAEbqE,GAAmBhH,IAAM+C,aAAY,WACzC,GAAe,OAAXlB,EAAiB,CACnB,IAAMgF,EAAO,IAAIC,WAAW,CAAC,IAC7BjF,EAAOkF,WAAWF,MAEnB,CAAChF,IAEEoF,GAAsBjH,IAAM+C,aAAY,SAACG,GAC7CjB,EAAiBiB,KAChB,IAEGgE,GAASlH,IAAM+C,aAAY,SAAC9B,GAChCC,EAAOD,KACN,IAEGkG,GAAYnH,IAAM+C,aAAY,SAACG,EAAOvD,GAC1CuB,GAAO,SAACkG,GAAD,OACLA,EAAKnG,KAAI,SAACgC,EAAKoE,GAAN,OACPA,IAAWnE,EAAQvD,EAAMsD,UAG5B,IAEGqE,GAAUtH,IAAM+C,aAAY,WAChClC,aAAa0G,QAAQ,MAAOxG,KAAKyG,UAAUvG,MAC1C,CAACA,IAEEwG,GAAazH,IAAM+C,aAAY,SAAC2E,GAAuB,IAAD,EACpDN,EAAI,YAAOnG,GACX0G,EAAY1G,EAAI0B,IAChBiF,EAAO,SAAC1E,EAAc2E,EAAmBlB,GACzCkB,EAAY,GAAKA,EAAYzH,KAEjCgH,EAAKlE,GAAS,QACdkE,EAAKS,GAAalB,IAGdmB,EAAM,UAAG3D,IAAE3B,KAAK7B,EAAO,CAAC,QAAS+G,WAA3B,aAAG,EAAqCpE,KAE/CwE,IAEa,eAAdH,EACa,OAAXG,EACEnF,GAjPE,IAiPwB,GAC5BiF,EAAKjF,GAAeA,GAAgB,EAAGgF,GAErB,gBAAXG,EACTF,EAAKjF,GAAeA,GAAe,cACf,iBAAXmF,GACTF,EAAKjF,GAAeA,GAAe,YAEd,aAAdgF,EACM,OAAXG,EACFF,EAAKjF,GAAeA,GA3Pd,EA2PqCgF,GACvB,gBAAXG,EACTF,EAAKjF,GAAeA,GAAe,cACf,iBAAXmF,GACTF,EAAKjF,GAAeA,GAAe,eAEd,gBAAdgF,EACM,OAAXG,EACEnF,GAnQE,IAmQwBvC,GAC5BwH,EAAKjF,GAAeA,GAAgB,EAAGgF,GAErB,gBAAXG,EACTF,EAAKjF,GAAeA,GAAe,YACf,iBAAXmF,GACTF,EAAKjF,GAAeA,GAAe,cAEd,eAAdgF,IACM,OAAXG,EACFF,EAAKjF,GAAeA,GA7Qd,EA6QqCgF,GACvB,gBAAXG,EACTF,EAAKjF,GAAeA,GAAe,eACf,iBAAXmF,GACTF,EAAKjF,GAAeA,GAAe,eAIvCuE,GAAOE,GAAM,MACZ,CAACzG,EAAOM,EAAKiG,GAAQvE,KAElBoF,GAAa/H,IAAM+C,aAAY,SAACiF,GACpC,IAAMC,EAAQ,eAAO1G,GACf2G,EAAUrH,aAAaC,QAAQ,QAAU,QACrB0C,IAAtByE,EAASC,KACXD,EAASC,GAAW,IAGtBD,EAASC,GAAStB,KAAK,CACrBoB,OACA5F,MAAOA,KAGTZ,EAAWyG,GACXpH,aAAa0G,QAAQ,UAAWxG,KAAKyG,UAAUS,MAC9C,CAAC1G,EAASN,EAAKmB,KAEZ+F,GAAsBnI,IAAM+C,aAAY,SAACqF,GAC7C9G,EAAiB8G,KAChB,IAEGC,GAAUrI,IAAM+C,aAAY,WAChCoF,IAAoB,KACnB,IAqCH,OAnCAnI,IAAMsI,WAAU,WACTzH,aAAaC,QAAQ,QACxBD,aAAa0G,QAAQ,MAAOxG,KAAKyG,UAAUtH,MAE5C,IAEHF,IAAMsI,WAAU,WACd,IAAMC,EAAgB,SAACC,GACrB,IAAM7B,EAAQ6B,EAAEC,OAAO9B,MAAM+B,SAAS,GAAGC,SAAS,IAClD9C,QAAQC,IAAIa,GAEE,MAAVA,IACEzE,GAAUI,OAAS,IACrBmF,GAAWvF,GAAU,IACrBC,IAAa,SAAAD,GAAS,OAAIA,EAAU0C,MAAM,OAGnB,IAArB1C,GAAUI,QACZ+F,OASN,OAJIxG,GACFA,EAAOsD,iBAAiB,6BAA8BoD,GAGhD,WACF1G,GACFA,EAAO+G,oBAAoB,6BAA8BL,MAG5D,CAAC1G,EAAQK,GAAWmG,GAASZ,KAI9B,cAAC1H,EAAY8I,SAAb,CAAsBlC,MAAO,CAC3BmC,KArVQ,EAsVRC,KArVQ,EAsVRtI,OACAU,YACAF,MACA0B,iBACAE,eACAlC,QACAuB,aACAK,aACAZ,mBACAK,gBACAT,UACAa,SACAf,gBAEA2H,WAAYtI,EAEZ2C,YACAI,eACAE,eACAI,mBACAK,gBACAtB,kBAEAkB,gBAEAkD,UACAC,aACAG,WAEAzC,sBACAoB,iBACAe,oBAEAmB,uBACAJ,cAEAd,uBACAgC,gBAAiB7H,GAxCnB,SA0CGb,IA3XPL,EAAW,GAAK,cCjED,UAA0B,kCCA1B,MAA0B,oCCSzC,SAASgJ,EAAU5F,GACjB,OAAQA,GACN,IAAK,cACH,OAAO,IACT,IAAK,aACH,OAAO,IACT,IAAK,WACH,OAAO,GACT,QACE,OAAO,GAIE,SAAS6F,EAAT,GAAmC,IAAhB7F,EAAe,EAAfA,KAChC,OACE,qCACY,cAATA,GAAwB,qBAAK8F,IAAKC,EAAYC,IAAI,qBAAMC,UAAU,YAClE7J,EAAY4D,IACX,sBAAKkG,MAAO,CACVC,SAAU,WACVC,OAAQ,EACRC,MAAO,OACPC,OAAQ,OACRC,QAAS,OACTC,WAAY,SACZC,eAAgB,UAPlB,UASE,sBAAMR,UAAU,iBAAiBC,MAAO,CACtCC,SAAU,WACVO,KAAM,MACNC,IAAK,MACLC,UAAU,gCAAD,OAAkChB,EAAU5F,GAA5C,SAJX,gCAOA,qBAAK8F,IAAKe,EAAcb,IAAI,qBAAMC,UAAU,kBC3CvC,UAA0B,qC,0qBCSzC,IAAMa,EAAUC,IAAOC,IAAV,IAeSC,GAKhB,SAAAC,GAAK,+BACIC,KAAKC,MAAM,IAAMF,EAAM/H,GAD3B,6BAEKgI,KAAKC,MAAM,IAAMF,EAAMG,GAF5B,eAOLC,EAAcP,IAAOC,IAAV,KAMb,SAAAE,GAAK,OAAIA,EAAMK,QAAN,0CAIT,SAAAL,GAAK,OAAIA,EAAMM,KAAN,oCAGE,SAAAN,GAAK,OAAIA,EAAMK,OAAS,oBAAsB,UAY9C,SAASE,EAAT,GAA2C,IAAD,IAA3BC,gBAA2B,WACChL,IAAMiL,WAAWlL,GAAjEkB,EAD+C,EAC/CA,IAAK6H,EAD0C,EAC1CA,KAAMC,EADoC,EACpCA,KAAM5H,EAD8B,EAC9BA,UAAW8H,EADmB,EACnBA,gBAEpC,OACE,cAACmB,EAAD,CAAS3H,EAAGqG,EAAM6B,EAAG5B,EAArB,SACG9H,EAAIA,KAAI,SAACgC,EAAKC,GAAN,OACP,cAAC0H,EAAD,CACEE,KAAML,KAAKC,MAAMxH,EAAQ4F,GAAQ5F,EAAQ4F,GAAQ,IAAM,EACvD+B,OAAQG,GAAY7J,IAAc+B,EAElCgI,QAAS,WACPF,GAAY/B,EAAgB9H,IAAc+B,GAAS,EAAIA,IAL3D,SAQE,cAACiG,EAAD,CAAS7F,KAAML,KALVC,Q,uLClEf,IAAMiI,EAASd,IAAOe,OAAV,KAID,SAAAZ,GAAK,OAAIA,EAAMlF,QAAU,UAAY,UACnC,SAAAkF,GAAK,OAAIA,EAAMlF,QAAU,EAAI,MAO3B,SAAS+F,IAAmB,IAAD,EACSrL,IAAMiL,WAAWlL,GAA1D4B,EADgC,EAChCA,iBAAkBkD,EADc,EACdA,mBAC1B,OACE,cAACsG,EAAD,CAAQ7F,QAAS3D,EAAkBuJ,QAAS,kBAAMrG,KAAlD,SACE,sBAAM0E,UAAU,iBAAhB,yB,oCCpBS,MAA0B,kCCGnC+B,EAAsC,CAC1C,IAAOC,EAAQ,IAAsBC,QACrC,KAAQD,EAAQ,IAAsBC,SAYlCC,EAAqBzL,IAAMC,cAAc,IAEhCwL,IAEFC,EAAsB,SAAC,GAA+C,IAA7CnL,EAA4C,EAA5CA,SAC9BoL,EAAkB3L,IAAM4L,OAAuB,MAE/CC,EAAkB,SAACC,GAAyC,IAAD,EAC/D,OAAO,UAAAH,EAAgBI,eAAhB,eAAyBC,cAAzB,oBAAoDF,EAApD,SAA+D,MA8BxE,OACE,eAACL,EAAmB5C,SAApB,CACElC,MAAO,CACLsF,KA/BkB,SAACH,EAAYI,GACnC,IAAMC,EAAQN,EAAgBC,GAE1BK,IACFA,EAAMC,KAAOC,QAAO,OAACH,QAAD,IAACA,OAAD,EAACA,EAASE,MACzBD,EAAMG,SACTH,EAAMI,QACNJ,EAAMK,YAAc,GAGtBL,EAAMF,SAsBJQ,KAlBkB,SAAlBC,EAAmBZ,GACvB,GAAIA,EAAI,CACN,IAAMK,EAAQN,EAAgBC,GAC1BK,IACFA,EAAMI,QACNJ,EAAMK,YAAc,QAGrBG,OAAOC,KAAKtB,GAA0BxH,SAAQ,SAAC+I,GAC9CH,EAAgBG,QAMpB,UAKGtM,EACD,qBAAKuM,IAAKnB,EAAV,SACGgB,OAAOI,QAAQzB,GAAarK,KAAI,mCAAE4L,EAAF,KAAOzD,EAAP,YAC/B,uBAAiB4D,UAASH,EAAKzD,IAAKA,GAAxByD,YCrDP,SAASI,EAAT,GAEA,IADb3J,EACY,EADZA,KAAMJ,EACM,EADNA,MAAOwE,EACD,EADCA,UAAWhF,EACZ,EADYA,KAAMa,EAClB,EADkBA,OAClB,EAaRvD,IAAMiL,WAAWlL,GAXnBY,EAFU,EAEVA,MACAuB,EAHU,EAGVA,UACAK,EAJU,EAIVA,UAEAc,EANU,EAMVA,SACA4D,EAPU,EAOVA,oBACA7C,EARU,EAQVA,aACAtB,EATU,EASVA,eAEAd,EAXU,EAWVA,cAGMiK,EAASjM,IAAMiL,WAAWQ,GAA1BQ,KAEFa,EAAM9M,IAAM4L,OAAuB,MAhB7B,EAiBsBsB,YAAQ,CACxCC,OAAQ,CAAC,WAAY,QACrBC,MAFwC,SAElCC,EAAqBC,GAAU,IAAD,EAClC,GAAKC,GAAkBT,EAAIf,QAA3B,CAEA,IAAMyB,EAAY7M,EAAMqC,QAAO,SAAAP,GAAC,OAAIA,EAAEc,SAAWA,KAAQL,GACrDuK,EAAaD,EAAYrJ,IAAEvB,UAAUjC,EAAO,CAAC,QAAS6M,EAAUtK,QAAUA,EAExEwK,EAAiB,UAAGZ,EAAIf,eAAP,aAAG,EAAa4B,wBACjCC,EAAeN,EAAQO,kBACvBC,EAAaJ,EAAkBK,MAAQL,EAAkB1D,KACzDgE,EAAgBJ,EAAyBnL,EAAIiL,EAAkB1D,KAErE,GAAkB,SAAdqD,EAAK/J,KAAiB,CACxB,IAAKf,EAAW,OAChB,IAAM0L,EAAiB9J,IAAEvB,UAAUjC,EAAO,CAAC,QAAS4B,EAAUW,QACxDqB,EAAUyJ,GAA6B,GAAbF,EAChC,GAAIL,IAAeQ,GAAmB1J,GAAWkJ,EAAa,IAAMQ,EAAiB,OAGnF7J,EAAa6J,EAAgBR,GAAY,IADvClJ,QAMChC,GACHc,EAASgK,EAAKxG,KAAKvD,KAAMC,GAAQ,GAEnC8J,EAAK/J,KAAO,SAIhB4K,KAhCwC,SAgCnCb,EAAqBC,IACpBA,EAAQa,WAAcrB,EAAIf,UAE9BjJ,EACEnC,EACGM,KAAI,SAACgC,GACJ,OAAOA,EAAIM,SAAWvB,EAAf,2BACFiB,GADE,IAELM,OAAQhB,EAAYA,EAAUW,MAAQD,EAAIM,SACvCN,KAEND,QAAO,SAACC,GAAD,OAASA,EAAIC,QAAUlB,MAGnCiK,EAAK,UAIPmC,QAAS,SAACd,GAAD,MAAc,CACrBe,QAASf,EAAQgB,SACjBf,cAAeD,EAAQgB,OAAO,CAAEC,SAAS,IACzClB,KAAMC,EAAQxM,cAtEN,mBAiBHyM,EAjBG,KAiBHA,cAAiBW,EAjBd,OA0EmBM,YAAQ,CACrCnB,KAAM,CACJ/J,KAAM,WACNmL,OAAQvL,EACRA,MAAOwE,EACPgH,MAAM,EACN7H,KAAM,CAAEvD,SAEVqL,MAAO,SAACrB,GACF5F,GAAWT,EAAoBS,IAErCkH,IAAK,WACH3H,EAAoBlF,MAEtBqM,QAAS,SAACd,GAAD,MAAiC,CACxCuB,WAAYvB,EAAQuB,iBAzFZ,wBA0EHA,WAqBT,OAFAX,GAAKY,EA7FO,MA6FFhC,IAGR,qBAAKA,IAAKA,EAAKtD,MAAO,CACpBK,QAAS7H,IAAkB0F,EAAY,OAAS,QAChDqH,QAAS,EACTnF,OAAQ,MACRH,SAAU,YAJZ,SAME,cAAC,GAAD,CACEoB,OAAQ3I,EAAU,KAAOwF,EACzBA,UAAWA,EACXpE,KAAMA,EACNZ,KAAMA,M,4QC5Gd,IAAMsM,EAAU3E,IAAOC,IAAV,KAOA,SAAAE,GAAK,gBAAO,KAAoB,IAAbA,EAAMvG,KAApB,UAIJ,SAAAuG,GAAK,gBAAO,KAAoB,IAAbA,EAAMvG,KAApB,UAIF,SAAAuG,GAAK,gBAAO,KAA0B,KAAlBA,EAAMvG,KAAO,GAA5B,UASf,SAASgL,EAAT,GAA0C,IAAlB1L,EAAiB,EAAjBA,OAAiB,EAW1CvD,IAAMiL,WAAWlL,GATnBY,EAF4C,EAE5CA,MACA4B,EAH4C,EAG5CA,UACAP,EAJ4C,EAI5CA,cAEAqB,EAN4C,EAM5CA,SACAM,EAP4C,EAO5CA,YACAb,EAR4C,EAQ5CA,eACAkB,EAT4C,EAS5CA,aACAP,EAV4C,EAU5CA,YAGMwI,EAASjM,IAAMiL,WAAWQ,GAA1BQ,KACFhI,EAAOD,EAAaT,GAdoB,EAgBG2J,YAAQ,CACvDC,OAAQ,CAAC,OAAQ,YAEjBC,MAHuD,WAIjDG,GAAiBhL,GAAagB,IAAWhB,EAAUgB,SACrDsC,QAAQC,IAAI,WACZrC,EAAYlB,EAAUW,MAAX,YAAC,eACPX,GADM,IAETgB,cAKN2K,KAbuD,SAalDb,EAAqBC,GACpBA,EAAQa,YAEZlC,EAAK,QACLnJ,EACEnC,EACGM,KAAI,SAACgC,GACJ,OAAOA,EAAIM,SAAWvB,EAAf,2BACFiB,GADE,IAELM,OAAQhB,EAAYA,EAAUW,MAAQD,EAAIM,SACvCN,KAEND,QAAO,SAACC,GAAD,OAASA,EAAIC,QAAUlB,QAKrCoM,QAAS,SAACd,GAAD,MAAc,CACrBe,QAASf,EAAQgB,SACjBf,cAAeD,EAAQgB,OAAO,CAAEC,SAAS,IACzClB,KAAMC,EAAQxM,cAjD4B,0BAgBrCuN,EAhBqC,EAgBrCA,QAAShB,EAhB4B,EAgB5BA,KAAME,EAhBsB,EAgBtBA,cAAiBW,EAhBK,KAqD9ClO,IAAMsI,WAAU,gBACC9E,IAAXD,KACGhB,GAAa8L,EAChBhL,EAASgK,EAAKxG,KAAKvD,KAAMC,GAAQ,GACxBhB,IAAc8L,GACvB1K,EAAYpB,EAAUW,UAGzB,CAACmL,IAEJ,IAAMa,EAASvO,EAAMqC,QAAO,SAAAP,GAAC,OAAIA,EAAEc,SAAWA,KAE9C,OACE,eAACyL,EAAD,CAAS/K,KAAMA,EAAM6I,IAAKoB,EAA1B,UACGgB,EAAOjO,KAAI,SAACgC,EAAKkM,GAAN,OACV,qBAEE3F,MAAO,CACLC,SAAU,WACVsF,QAAS9L,EAAIP,KAAO,GAAM,GAJ9B,SAQKO,EAAIP,KASH,cAAC,GAAD,CACEgF,UAAWzE,EAAIC,MACfI,KAAML,EAAIK,KACVZ,KAAMO,EAAIP,OAXZ,cAACuK,EAAD,CACE1J,OAAQN,EAAIM,OACZD,KAAML,EAAIK,KACVoE,UAAWzE,EAAIC,MACfA,MAAOiM,EACPzM,KAAMO,EAAIP,QAbXO,EAAIC,eA0BCM,IAAXD,GACC,qCACE,qBACEiG,MAAO,CACLC,SAAU,YAFd,SAKE,cAAC,GAAD,CACE/B,UAAW3F,IACXuB,KAAK,OACLZ,MAAM,MAGV,qBACE8G,MAAO,CACLC,SAAU,YAFd,SAKE,cAAC,GAAD,CACE/B,UAAW3F,IACXuB,KAAK,OACLZ,MAAM,Y,gsBC/ItB,IAAM0M,EAAa/E,IAAOC,IAAV,KAQV+E,GAAWhF,IAAOC,IAAV,KAQRgF,GAAgBjF,IAAOkF,MAAV,KAwBJ,SAASC,GAAT,GAA8C,IAA3B9H,EAA0B,EAA1BA,UAAWhF,EAAe,EAAfA,KAE3C,OACE,eAAC0M,EAAD,WACE,qBAAKhG,ICpDI,yeDoDcE,IAAI,2BAC3B,cAAC+F,GAAD,CAAU9F,UAAU,WAApB,UACmB,IAAf7B,IAAqBhF,GACrB,cAACuM,EAAD,CACE1L,OAAQmE,MAId,qBAAK0B,IE5DI,irFF4DYE,IAAI,qBACzB,cAACgG,GAAD,CAAeG,aAAa,IAAI3D,GAAE,cAASpE,Q,qXGnDjD,IAAMgI,GAAOrF,IAAOC,IAAV,MAKN,SAAAE,GAAK,OAAIA,EAAMK,QAAN,iEAuBE7K,OAAM2P,YAAW,WAMtB7C,GAAM,IALdxJ,EAKa,EALbA,KACAoE,EAIa,EAJbA,UAIa,IAHbmD,cAGa,aAFbnI,YAEa,SADV8H,EACU,oDAEb,OACE,eAACkF,GAAD,2BAAUlF,GAAV,IAAiBK,OAAQA,EAAQtB,UAAS,UAAKjG,EAAL,SAA1C,UACY,UAATA,GAAoB,qBAAK8F,IAAKwG,EAAUtG,IAAI,oCACnC,OAAThG,GAAiB,qBAAK8F,ICjDd,i6EDiD0BE,IAAI,iBAC7B,gBAAThG,GAA0B,qBAAK8F,IElDvB,yrGFkD2CE,IAAI,mDAC9C,iBAAThG,GAA2B,qBAAK8F,IGnDxB,i2GHmD6CE,IAAI,yDAChD,QAAThG,GACC,cAACkM,GAAD,CACE9H,UAAWA,EACXhF,KAAMA,WI3CD,SAASmN,GAAT,GAA8C,IAArBvM,EAAoB,EAApBA,KAAoB,KAAdL,IACJuL,YAAQ,CAC9CnB,KAAM,CAAE/J,KAAM,OAAQuD,KAAM,CAAEvD,SAC9B8K,QAAS,SAACd,GAAD,MAAiC,CACxCuB,WAAYvB,EAAQuB,kBAJkC,mBACnCC,GADmC,KACjDD,WADiD,MAC7BiB,EAD6B,KAY1D,OAJA9P,IAAMsI,WAAU,WACdwH,EAAQC,cAAiB,CAAEC,sBAAsB,MAChD,IAGD,qBAAKlD,IAAKgC,EAAV,SACE,cAAC,GAAD,CAAMxL,KAAMA,EAAMoE,WAAY,M,uvBCtBpC,IAAMuI,GAAU5F,IAAOC,IAAV,MAwBP4F,GAAiB7F,IAAOC,IAAV,MAER,SAAAE,GAAK,OAAIA,EAAM2F,QAAU,WAAa,OAiB9C,SAAA3F,GAAK,OAAIA,EAAM4F,OAAN,+CAaE,SAASC,GAAT,GAA0D,IAApCnF,EAAmC,EAAnCA,QAASkF,EAA0B,EAA1BA,MAAO7P,EAAmB,EAAnBA,SAAmB,EACxCP,IAAMQ,UAAS,GADyB,mBAC/D2P,EAD+D,KACtDG,EADsD,KAGtE,OACE,cAACL,GAAD,CACEM,aAAc,SAAC/H,GACb8H,GAAW,IAEbE,WAAY,SAAChI,GACX8H,GAAW,IAEbpF,QAAS,kBAAMA,KAPjB,SASE,cAACgF,GAAD,CAAgBE,MAAOA,EAAOD,QAASA,EAAvC,SACG5P,MC1EM,WAA0B,iCCA1B,OAA0B,kC,w7BCYzC,IAAMkQ,GAAYpG,IAAOC,IAAV,MAUToG,GAAerG,IAAOC,IAAV,MAkBZqG,GAAqBtG,IAAOe,OAAV,MAIpB,SAAAZ,GAAK,OAAIA,EAAMoG,OAAN,0BAQPC,GAAQxG,IAAOC,IAAV,MAOI,SAASwG,KAAgB,IAAD,EACO9Q,IAAMiL,WAAWlL,GAArDkG,EAD6B,EAC7BA,cAAee,EADc,EACdA,iBACjB8F,EAAM9M,IAAM4L,OAAuB,MAQzC,OANA5L,IAAMsI,WAAU,WACM,OAAhBwE,EAAIf,SACNlG,QAAQC,IAAIgH,EAAIf,QAAQgF,cAEzB,CAACjE,IAGF,eAAC2D,GAAD,WACE,eAACC,GAAD,WACE,cAACC,GAAD,CACEJ,aAAc,WACRzD,EAAIf,UAASe,EAAIf,QAAQgF,YAAc,KAE7CH,QAAQ,EAJV,SAME,sBAAMrH,UAAU,iBAAhB,mCAEF,cAAC,GAAD,CAAMjG,KAAK,UACX,cAACuN,GAAD,CAAO/D,IAAKA,EAAZ,SACE,cAACmC,EAAD,MAEF,cAAC0B,GAAD,CACEJ,aAAc,WACRzD,EAAIf,UAASe,EAAIf,QAAQgF,YAAc,KAF/C,SAKE,sBAAMxH,UAAU,iBAAhB,uCAGJ,cAAC8G,GAAD,CAAYnF,QAAS,kBAAMjF,KAA3B,SACE,qBAAKmD,IAAK4H,GAAS1H,IAAI,WAEzB,cAAC+G,GAAD,CAAYD,OAAK,EAAClF,QAAS,kBAAMlE,KAAjC,SACE,qBAAKoC,IAAK6H,GAAU3H,IAAI,e,opBCpFhC,IAAM0F,GAAU3E,IAAOC,IAAV,MASP4G,GAAsB7G,IAAOC,IAAV,MAKnB6G,GAAc9G,IAAOC,IAAV,MAgBX8G,GAA8B,CAAC,KAAM,cAAe,eAAgB,OAE3D,SAASC,KAAW,IACzB1N,EAAgB3D,IAAMiL,WAAWlL,GAAjC4D,YACAsI,EAASjM,IAAMiL,WAAWQ,GAA1BQ,KAFwB,EAIfiB,YAAQ,CACvBC,OAAQ,WACRe,KAFuB,SAElBb,GACHpB,EAAK,QACLtI,EAAY0J,EAAKnK,UAJZgL,EAJuB,oBAahC,OACE,eAAC,GAAD,WACE,cAACgD,GAAD,UACE,cAACJ,GAAD,MAEF,cAACK,GAAD,CAAarE,IAAKoB,EAAlB,SACGkD,GAAWnQ,KAAI,SAACqQ,EAAMnC,GAAP,OACd,cAACU,GAAD,CACE5M,IAAKkM,EACL7L,KAAMgO,GACDnC,W,aC7DXoC,GAAmC,CACvC9H,SAAU,QACV+H,cAAe,OACf9H,OAAQ,KACRM,KAAM,EACNC,IAAK,EACLN,MAAO,OACPC,OAAQ,QAGV,SAAS6H,GACPC,EACAC,EACAC,GAEA,IAAKF,IAAkBC,EACrB,MAAO,CACL9H,QAAS,QAHb,IAOMpH,EAASkP,EAATlP,EAAGkI,EAAMgH,EAANhH,EAEHT,EAAS,oBAAgBzH,EAAhB,eAAwBkI,EAAxB,OAEf,MAAO,CACLT,YACA2H,gBAAiB3H,GAQd,IAAM4H,GAAkD,SAACtH,GAAW,IAAD,EACvCxK,IAAMiL,WAAWlL,GADsB,KAChEY,MADgE,EACzDqB,cAQX+P,cAAa,SAACzE,GAAD,MAAc,CAC7BD,KAAMC,EAAQxM,UACdkR,SAAU1E,EAAQ2E,cAClBP,cAAepE,EAAQ4E,+BACvBP,cAAerE,EAAQ6E,wBACvBtD,WAAYvB,EAAQuB,kBAVpBmD,EAJsE,EAItEA,SACAnD,EALsE,EAKtEA,WACAxB,EANsE,EAMtEA,KACAqE,EAPsE,EAOtEA,cACAC,EARsE,EAQtEA,cAoBF,OAAK9C,EAIH,qBAAKrF,MAAO+H,GAAZ,SACE,qBACE/H,MAAOiI,GAAcC,EAAeC,EAAenH,EAAM4H,YAD3D,SAhBJ,WACE,OAAQJ,GACN,IAAK,OACH,OAAO,cAAC,GAAD,CAAMtK,WAAY,EAAGpE,KAAM+J,EAAKxG,KAAKvD,OAC9C,IAAK,WACH,OAAO,cAAC,GAAD,CAAMoE,UAAW2F,EAAKnK,MAAOI,KAAM+J,EAAKxG,KAAKvD,OACtD,QACE,OAAO,MAYN+O,OAPE,M,8HClEX,IAAMC,GAAiBjI,IAAOC,IAAV,MAML,SAASiI,KACtB,OACE,cAACD,GAAD,UACE,cAACvH,EAAD,CAAKC,UAAU,M,uaCPrB,IAAMsH,GAAiBjI,IAAOC,IAAV,MAQdkI,GAAanI,IAAOe,OAAV,MAkBD,SAASmH,KAAW,IAAD,EACyCvS,IAAMiL,WAAWlL,GAAlFoB,EADwB,EACxBA,UAAWgG,EADa,EACbA,UAAWxE,EADE,EACFA,cAAeE,EADb,EACaA,YAAaiG,EAD1B,EAC0BA,KAAMC,EADhC,EACgCA,KAEhE,OACE,cAAC,GAAD,UACGtJ,EAAMuD,QAAO,SAACM,GAAD,MACF,eAATA,GAAyBnC,EAAY2H,IAAS,GACrC,gBAATxF,GAA0BnC,EAAY2H,IAASA,EAAO,GAC7C,aAATxF,GAAuBnC,EAAY2H,EAAO,GACjC,eAATxF,GAAyBnC,GAAa2H,EAAO,GAAKC,IAClDrJ,EAAY4D,KACE,IAAfnC,KACCF,KAAI,SAACqC,EAAMJ,GAAP,OACL,cAACsP,GAAD,CAAwBtH,QAAS,WAC3BxL,EAAY4D,KAA4B,IAAnBX,EACvBwE,EAAUxE,EAAe,SACP,cAATW,IAAyC,IAAjBT,GACjCsE,EAAUtE,EAAa,UAGV,IAAf1B,GAAoBgG,EAAUhG,EAAWmC,IAP3C,SASY,UAATA,EACC,sBAAMiG,UAAU,iBAAhB,oBACG,cAACJ,EAAD,CAAS7F,KAAMA,KAXLJ,Q,sYC3ClB,IAAMuP,GAAQpI,IAAOC,IAAV,MACL,SAAAE,GAAK,OAAIA,EAAMkI,QAAU,OAAS,UAYlCC,GAAatI,IAAOC,IAAV,M,s/DCRvB,IAAM0E,GAAU3E,IAAOC,IAAV,MAOPsI,GAAQvI,IAAOC,IAAV,MAOA,SAAAE,GAAK,OAAIA,EAAMqI,QAAU,UAAY,aAS1CC,GAAezI,IAAOC,IAAV,MAWZyI,GAAiB1I,IAAOC,IAAV,MASd0I,GAAc3I,IAAOC,IAAV,MAiBX2I,GAAc5I,IAAOC,IAAV,MAWX4I,GAAc7I,IAAO8I,KAAV,MAKXC,GAAe/I,IAAOkF,MAAV,MAUZ8D,GAAgBhJ,IAAOe,OAAV,MASbkI,GAAejJ,IAAOe,OAAV,MAcH,SAASmI,KAAe,IAAD,EACZvT,IAAMQ,SAAS,IADH,mBAC7BwH,EAD6B,KACvBwL,EADuB,OAEAxT,IAAMQ,UAAS,GAFf,mBAE7BiT,EAF6B,KAEjBC,EAFiB,OAGoD1T,IAAMiL,WAAWlL,GAAjGqC,EAH4B,EAG5BA,MAAOnB,EAHqB,EAGrBA,IAAKI,EAHgB,EAGhBA,cAAeE,EAHC,EAGDA,QAAS4G,EAHR,EAGQA,oBAA6BJ,GAHrC,EAG6Bb,OAH7B,EAGqCa,YAEnE4L,EAA0D,IAA9C1S,EAAI+B,QAAO,SAAAP,GAAC,MAAU,cAANA,KAAmBH,OAC/CsR,EAA8BzP,IAAE0P,QAAQtS,EAAQV,aAAaC,QAAQ,QAAU,KAAO,GAAI,CAAC,SAAU,CAAC,SAE5G,OACE,cAAC2R,GAAD,CAAOC,QAASrR,EAAhB,SACE,cAACsR,GAAD,UACE,eAAC,GAAD,WACE,cAACC,GAAD,CAAOC,QAASc,EAAhB,SAEIA,EACE,qDAEE,+FAGF,oDAEE,8GAKR,eAACb,GAAD,WAAea,EAAYvR,EAAQ,EAAnC,aAEEuR,GACE,eAACZ,GAAD,WACE,cAACC,GAAD,UAEIY,EAAW3S,KAAI,SAAC6S,EAAM5Q,GAAP,OACb,eAAC+P,GAAD,CAAyB1J,UAAU,eAAnC,UACE,gCAAK,uBAAMA,UAAU,OAAhB,UAAwBrG,EAAQ,EAAhC,YAAL,IAAiD4Q,EAAK9L,QACtD,iCAAO8L,EAAK1R,MAAZ,cAFgBc,QAOxB,eAACgQ,GAAD,CAAaa,SAAU,SAACvL,GACtBA,EAAEwL,iBAEW,KAAThM,EACF5C,MAAM,6DAEN2C,EAAWC,GACXwL,EAAQ,IACRE,GAAc,KARlB,UAWE,cAACN,GAAD,CACEzM,MAAOqB,EACPiM,SAAUR,EACVS,SAAU,SAAC1L,GACTgL,EAAQhL,EAAEC,OAAO9B,QAEnBwN,YAAY,6DAEd,cAACd,GAAD,CAAee,SAAUX,EAAzB,gCAKR,cAACH,GAAD,CAAcpI,QAAS,WACrBwI,GAAc,GACdvL,GAAoB,IAFtB,iC,0hDCnKV,IAAM6G,GAAU3E,IAAOC,IAAV,MAUP+J,GAAahK,IAAOC,IAAV,MASVgK,GAAiBjK,IAAOC,IAAV,MAIdiK,GAAYlK,IAAOC,IAAV,MAMTkK,GAAenK,IAAOC,IAAV,MAQZmK,GAAYpK,IAAOC,IAAV,MAcToK,GAAgBrK,IAAOe,OAAV,MAmBbuJ,GAAatK,IAAOe,OAAV,MAahB,SAASwJ,KAAa,IAAD,EACU5U,IAAMiL,WAAWlL,GAAtCU,EADW,EACXA,KAAMuI,EADK,EACLA,WACNiD,EAASjM,IAAMiL,WAAWQ,GAA1BQ,KAER,OACE,mCAEa,cAATxL,GACA,cAAC+T,GAAD,UACE,cAACnE,GAAD,CAAYnF,QAAS,WACnBlC,EAAW,QACXiD,EAAK,MAAO,CACVG,MAAM,KAHV,SAME,qBAAKhD,IAAK4H,GAAS1H,IAAI,mBASnC,SAASuL,KAAY,IAAD,EACW7U,IAAMiL,WAAWlL,GAAtCU,EADU,EACVA,KAAMuI,EADI,EACJA,WACd,OACE,qCAEa,SAATvI,GACA,eAAC,GAAD,WACE,eAAC4T,GAAD,WACE,cAACE,GAAD,UACE,cAAClJ,EAAD,MAEF,eAACoJ,GAAD,WACE,cAACC,GAAD,CAAexJ,QAAS,kBAAMlC,EAAW,YAAzC,SACE,sBAAMO,UAAU,iBAAhB,wBAEF,cAACwB,EAAD,UAGJ,cAACuJ,GAAD,UACE,cAACjD,GAAD,SAKN,cAACkC,GAAD,OAKN,SAAShB,KAAW,IAAD,EACqBvS,IAAMiL,WAAWlL,GAA/CU,EADS,EACTA,KAAMuI,EADG,EACHA,WAAY1B,EADT,EACSA,QAE1B,OACE,mCAEa,YAAT7G,GACA,eAAC,GAAD,WACE,cAACkU,GAAD,CAAYzJ,QAAS,WACnBlC,EAAW,QACX1B,KAFF,SAGG,sBAAMiC,UAAU,iBAAhB,kCACH,cAACgJ,GAAD,IACA,cAAC,GAAD,SAOK,SAASuC,KACtB,OACE,cAACxU,EAAD,UACE,eAAC,IAAD,CAAa4L,QAAS6I,IAAtB,UACE,cAAC,GAAD,CAAiB3C,YAAY,IAC7B,cAACyC,GAAD,IACA,cAAC,GAAD,IACA,cAACD,GAAD,SCtKOI,OAVf,WACE,OACE,qBAAKzL,UAAU,MAAf,SACE,cAAC,EAAD,UACE,cAACuL,GAAD,SCKOG,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBjQ,MAAK,YAAkD,IAA/CkQ,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCHdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFpP,SAASC,eAAe,SAM1ByO,O","file":"static/js/main.098a2915.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/bgm2.bb854747.wav\";","export default __webpack_public_path__ + \"static/media/drop.81a8bdc2.wav\";","export type coinT = \"end-point\" | \"start-left\" | \"start-right\" | \"start-up\" | \"start-down\" | \"empty\"\nexport const coins:Array<coinT> = [\"end-point\", \"start-left\", \"start-right\", \"start-up\", \"start-down\", \"empty\"]\n\nexport function isStartCoin(coin: coinT): boolean {\n  return [\"start-left\", \"start-right\", \"start-up\", \"start-down\"].includes(coin)\n}","import _ from 'lodash'\nimport React from 'react'\nimport { card, cardType } from '../types/card'\nimport { coinT, isStartCoin } from '../types/coin'\nimport { rankingT } from '../types/ranking'\n\n\nconst DEBUG = true\n// eslint-disable-next-line @typescript-eslint/no-use-before-define\nconst windowNavigator: any = navigator\n\ntype pageT = 'mapEdit' | 'game' | 'gameStart'\n\ninterface valueT {\n  mapX: number\n  mapY: number\n  page: pageT\n  map: Array<coinT>\n  mapStartIndex: number\n  mapEndIndex: number\n  queue: Array<card>\n  playArray: Array<number>\n  tempQueue: card | undefined\n  bluetoothConnect: boolean\n  draggingIndex: number\n  activeMap: number\n  score: number\n\n  resultVisible: boolean\n\n  ranking: Record<string, Array<rankingT>>\n\n  changePage: (page: pageT) => void\n\n  addQueue: (type: cardType, parent?: number, temp?: boolean) => void\n  getQueueDeps: (index: number | undefined) => number\n  updateQueue: (index: number, payload: card) => void\n  deleteQueue: (index: number) => void\n  deleteNextQueue: (index: number) => void\n  replaceQueue: (index1: number, index2: number, isFor: boolean, isRight: boolean) => void\n  reSortSetQueue: (queue: Array<card>) => void\n\n  putMap: (map: Array<coinT>) => void\n  updateMap: (index: number, coin: coinT) => void\n  saveMap: () => void\n\n  setBluetoothDevice: () => void\n  sendQueueData: () => void\n  sendResetMessage: () => void\n\n  changeDraggingIndex: (index: number) => void\n  changeActiveMap: (index: number) => void\n\n  updateResultVisible: (bool: boolean) => void\n\n  addRanking: (name: string) => void\n}\n\nconst GameContext = React.createContext({} as valueT)\n\nexport default GameContext\n\nconst MAP_X = 4\nconst MAP_Y = 4\nconst defaultMap = Array(MAP_X * MAP_Y).fill(\"empty\");\ndefaultMap[0] = \"start-right\";\n\nexport function GameContextProvider({ children }: React.PropsWithChildren<{}>) {\n  const [page, setPage] = React.useState<pageT>(\"gameStart\")\n  const [queue, setQueue] = React.useState<Array<card>>([])\n  const [map, setMap] = React.useState<Array<coinT>>(\n    localStorage.getItem(\"map\") ? JSON.parse(localStorage.getItem(\"map\") || \"[]\") : defaultMap\n  )\n  const [activeMap, setActiveMap] = React.useState<number>(-1)\n  const [resultVisible, setResultVisible] = React.useState(false)\n\n  const [ranking, setRanking] = React.useState(JSON.parse(localStorage.getItem(\"ranking\") || \"{}\"))\n  const [queueId, setQueueId] = React.useState(1)\n  const [bluetoothConnect, setBluetoothConnect] = React.useState(false)\n  const [device, setDevice] = React.useState<any>(null)\n  const [draggingIndex, setDraggingIndex] = React.useState(Infinity)\n\n  const [playArray, setPlayArray] = React.useState([])\n\n  const score = React.useMemo(() => (\n    9000 - queue.length * 100\n  ), [queue])\n\n  const tempQueue = React.useMemo(() => (\n    queue.find(x => x.temp === true)\n  ), [queue])\n\n  const mapStartIndex = React.useMemo(() => (\n    map.findIndex(isStartCoin)\n  ), [map])\n\n  const mapEndIndex = React.useMemo(() => (\n    map.findIndex((coin) => coin === \"end-point\")\n  ), [map])\n\n  const reSortSetQueue = React.useCallback((queue: Array<card>) => {\n    setQueue(\n      queue.filter(val => val.index !== Infinity).reduce((acc, val) => (\n        [...acc, {\n          ...val,\n          temp: false,\n        }]\n      ), [] as Array<card>)\n    )\n  }, [])\n\n  const addQueue = React.useCallback((type: cardType, parent?: number, temp?: boolean) => {\n    setQueue(queue => ([\n      ...queue,\n      {\n        type,\n        parent,\n        index: queueId,\n        temp: temp === undefined ? false : true\n      }\n    ]))\n    setQueueId(queueId + 1)\n  }, [queueId])\n\n  const updateQueue = React.useCallback((index: number, payload: card) => {\n    setQueue(queue => (queue.map(x => x.index !== index ? x : {\n      ...x,\n      ...payload\n    })))\n  }, [])\n\n  const deleteQueue = React.useCallback((index: number) => {\n    let changeQueue: Array<card> = [...queue];\n\n    (function del(index) {\n      changeQueue.filter(val => val.parent === index).forEach((val) => {\n        del(val.index)\n      })\n      changeQueue = changeQueue.filter(val => val.index !== index && val.parent !== index);\n    })(index)\n\n    reSortSetQueue(changeQueue);\n  }, [reSortSetQueue, queue])\n\n  const deleteNextQueue = React.useCallback((index: number) => {\n    reSortSetQueue(queue.filter(val => val.index < index))\n  }, [reSortSetQueue, queue])\n\n  const getQueueDeps = React.useCallback((index) => {\n    let deps = 0;\n\n    (function find(index, queue) {\n      if (index === undefined || index === -1) return deps;\n      deps += 1;\n\n      const findQueue = _.find(queue, ['index', index])\n      if (findQueue) {\n        find(findQueue.parent, queue)\n      }\n    })(index, queue)\n\n    return deps;\n  }, [queue])\n\n  const replaceQueue = React.useCallback((draggingIndex:number, droppingIndex:number, isFor: boolean, isRight: boolean) => {\n    const movingQueue = queue[draggingIndex];\n    const changeParent = queue[droppingIndex].parent;\n    const changeQueue = queue.filter((x, index) => index !== draggingIndex && x.index !== Infinity)\n    const isFront = isRight ? 1 : 0;\n    let middleQueue: Array<card> = []\n\n    middleQueue = [{\n      ...movingQueue,\n      parent: changeParent,\n    }]\n\n    setQueue([\n      ...changeQueue.slice(0, droppingIndex + isFront),\n      ...middleQueue,\n      ...changeQueue.slice(droppingIndex + isFront)\n    ])\n  }, [queue])\n\n  const setBluetoothDevice = React.useCallback(() => {\n    windowNavigator.bluetooth.requestDevice({\n      filters: [{ services: [0xFFE0] }]\n    })\n      .then(function(device: any) {\n        device.addEventListener('gattserverdisconnected', () => {\n          alert(\"디바이스 연결이 끊어졌습니다.\");\n\n          setDevice(null)\n          setBluetoothConnect(false)\n        });\n        return device.gatt.connect();\n      })\n      .then(function(server: any) {\n        return server.getPrimaryService(0xFFE0);\n      })\n      .then(function(service: any) {\n        return service.getCharacteristic(0xFFE1);\n      })\n      .then(function(characteristic: any) {\n        setBluetoothConnect(true)\n        setDevice(characteristic)\n        characteristic.startNotifications().then(() => {\n          console.log(\"aaa\")\n        })\n      })\n      .catch(function(error: any) {\n        console.error('Connection failed!', error);\n      });\n  }, [])\n\n  const sendQueueData = React.useCallback(() => {\n    if (mapStartIndex === -1 && mapEndIndex === -1) {\n      alert(\"맵에 시작부분과 끝 부분 모두 설정해주세요!\");\n      return;\n    }\n    const hasingType: Record<cardType, number> = {\n      \"go\": 0x01,\n      \"left-rotate\": 0x02,\n      \"right-rotate\": 0x03,\n      \"temp\": -1,\n      \"for\": -1,\n      \"start\": -1\n    }\n    let flatArray: any = [];\n    let cardFlatArray: any = [];\n\n    (function find(queueP: Array<card>, index: number) {\n      if (queueP.length <= index) return;\n      if (queueP[index].type === \"for\") {\n        const loopCount = document.getElementById(`for-${queueP[index].index}`) as HTMLInputElement;\n        const childrens = queue.filter(x => x.parent === queueP[index].index)\n\n        if (loopCount) {\n          Array(Number(loopCount.value)).fill(0).forEach(() => find(childrens, 0))\n        }\n      } else {\n        flatArray.push(hasingType[queueP[index].type]);\n        cardFlatArray.push(queueP[index].index)\n      }\n\n      find(queueP, index + 1)\n    })(queue.filter(x => x.parent === undefined), 0)\n\n    if (flatArray.length > 90) {\n      alert(\"실행 횟수가 너무 길어요!\");\n      return;\n    }\n\n    var data = new Uint8Array([0x04, ...flatArray, 0x04]);\n\n    if (device !== null) {\n      device.writeValue(data)\n      setPlayArray(cardFlatArray)\n    }\n  }, [queue, device, mapStartIndex])\n\n  const sendResetMessage = React.useCallback(() => {\n    if (device !== null) {\n      const data = new Uint8Array([0x05])\n      device.writeValue(data)\n    }\n  }, [device])\n\n  const changeDraggingIndex = React.useCallback((index: number) => {\n    setDraggingIndex(index)\n  }, [])\n\n  const putMap = React.useCallback((map, save = true) => {\n    setMap(map)\n  }, [])\n\n  const updateMap = React.useCallback((index, coin) => {\n    setMap((_map) => (\n      _map.map((val, _index) => (\n        _index === index ? coin: val\n      ))\n    ))\n  }, [])\n\n  const saveMap = React.useCallback(() => {\n    localStorage.setItem(\"map\", JSON.stringify(map));\n  }, [map])\n\n  const moveRabbit = React.useCallback((cardIndex: number) => {\n    const _map = [...map];\n    const direction = map[mapStartIndex];\n    const move = (index:number, moveIndex: number, value: coinT) => {\n      if (moveIndex < 0 || moveIndex > MAP_X * MAP_Y - 1) return;\n\n      _map[index] = \"empty\";\n      _map[moveIndex] = value;\n    }\n\n    const action = _.find(queue, [\"index\", cardIndex])?.type;\n\n    if (!action) return;\n   \n    if (direction === \"start-left\") {\n      if (action === \"go\") {\n        if (mapStartIndex % MAP_X !== 0) {\n          move(mapStartIndex, mapStartIndex - 1, direction);\n        }\n      } else if (action === \"left-rotate\") {\n        move(mapStartIndex, mapStartIndex, \"start-down\");\n      } else if (action === \"right-rotate\") {\n        move(mapStartIndex, mapStartIndex, \"start-up\");\n      }\n    } else if (direction === \"start-up\") {\n      if (action === \"go\") {\n        move(mapStartIndex, mapStartIndex - MAP_X, direction);\n      } else if (action === \"left-rotate\") {\n        move(mapStartIndex, mapStartIndex, \"start-left\");\n      } else if (action === \"right-rotate\") {\n        move(mapStartIndex, mapStartIndex, \"start-right\");\n      }\n    } else if (direction === \"start-right\") {\n      if (action === \"go\") {\n        if (mapStartIndex % MAP_X !== MAP_X - 1) {\n          move(mapStartIndex, mapStartIndex + 1, direction);\n        }\n      } else if (action === \"left-rotate\") {\n        move(mapStartIndex, mapStartIndex, \"start-up\");\n      } else if (action === \"right-rotate\") {\n        move(mapStartIndex, mapStartIndex, \"start-down\");\n      }\n    } else if (direction === \"start-down\") {\n      if (action === \"go\") {\n        move(mapStartIndex, mapStartIndex + MAP_X, direction);\n      } else if (action === \"left-rotate\") {\n        move(mapStartIndex, mapStartIndex, \"start-right\");\n      } else if (action === \"right-rotate\") {\n        move(mapStartIndex, mapStartIndex, \"start-left\");\n      }\n    }\n\n    putMap(_map, false)\n  }, [queue, map, putMap, mapStartIndex])\n\n  const addRanking = React.useCallback((name) => {\n    const _ranking = {...ranking}\n    const hashKey = localStorage.getItem(\"map\") || \"\";\n    if (_ranking[hashKey] === undefined) {\n      _ranking[hashKey] = [];\n    }\n\n    _ranking[hashKey].push({\n      name,\n      score: score\n    })\n\n    setRanking(_ranking)\n    localStorage.setItem(\"ranking\", JSON.stringify(_ranking))\n  }, [ranking, map, score])\n\n  const updateResultVisible = React.useCallback((bool) => {\n    setResultVisible(bool)\n  }, [])\n\n  const gameEnd = React.useCallback(() => {\n    updateResultVisible(true);\n  }, [])\n\n  React.useEffect(() => {\n    if (!localStorage.getItem(\"map\")) {\n      localStorage.setItem(\"map\", JSON.stringify(defaultMap)) \n    }\n  }, [])\n\n  React.useEffect(() => {\n    const handleChanged = (e: any) => {\n      const value = e.target.value.getUint8(0).toString(10);\n      console.log(value);\n\n      if (value === \"1\") {\n        if (playArray.length > 0) {\n          moveRabbit(playArray[0]);\n          setPlayArray(playArray => playArray.slice(1))\n        }\n        \n        if (playArray.length === 1) {\n          gameEnd();\n        }\n      }\n    }\n\n    if (device) {\n      device.addEventListener('characteristicvaluechanged', handleChanged);\n    }\n    \n    return (() => {\n      if (device) {\n        device.removeEventListener('characteristicvaluechanged', handleChanged);\n      }\n    })\n  }, [device, playArray, gameEnd, moveRabbit])\n\n\n  return (\n    <GameContext.Provider value={{\n      mapX: MAP_X,\n      mapY: MAP_Y,\n      page,\n      activeMap,\n      map,\n      mapStartIndex,\n      mapEndIndex,\n      queue,\n      playArray,\n      tempQueue,\n      bluetoothConnect,\n      draggingIndex,\n      ranking,\n      score,\n      resultVisible,\n\n      changePage: setPage,\n\n      addQueue,\n      updateQueue,\n      deleteQueue,\n      deleteNextQueue,\n      replaceQueue,\n      reSortSetQueue,\n\n      getQueueDeps,\n\n      putMap,\n      updateMap,\n      saveMap,\n\n      setBluetoothDevice,\n      sendQueueData,\n      sendResetMessage,\n\n      updateResultVisible,\n      addRanking,\n\n      changeDraggingIndex,\n      changeActiveMap: setActiveMap\n    }}>\n      {children}\n    </GameContext.Provider>\n  )\n}","export default __webpack_public_path__ + \"static/media/igloo.cfbb7b69.svg\";","export default __webpack_public_path__ + \"static/media/penguin.47034e53.svg\";","import React from 'react'\nimport iglooImage from '../../images/igloo.svg'\nimport penguinImage from '../../images/penguin.svg'\nimport { coinT, isStartCoin } from '../../types/coin'\n\ntype Props = {\n  type: coinT,\n}\n\nfunction getRotate(type: coinT) {\n  switch (type) {\n    case \"start-right\":\n      return 180;\n    case \"start-down\":\n      return 270;\n    case \"start-up\":\n      return 90;\n    default:\n      return 0;\n  }\n}\n\nexport default function MapIcon({ type }: Props) {\n  return (\n    <>\n      {type === \"end-point\" && <img src={iglooImage} alt=\"이글루\" className=\"mapIcon\" />}\n      {isStartCoin(type) && (\n        <div style={{\n          position: \"relative\",\n          zIndex: 5,\n          width: '100%',\n          height: '100%',\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n        }}>\n          <span className=\"material-icons\" style={{\n            position: \"absolute\",\n            left: \"50%\",\n            top: \"80%\",\n            transform: `translate(-50%, -50%) rotate(${getRotate(type)}deg)`,\n\n          }} >keyboard_backspace</span>\n          <img src={penguinImage} alt=\"시작점\" className=\"mapIcon\"/>\n        </div>\n      )}\n    </>\n  )\n}\n","export default __webpack_public_path__ + \"static/media/bg-right.b488f40e.png\";","import React from 'react'\nimport styled from 'styled-components'\nimport GameContext from '../../contexts/GameContext'\n\nimport MapIcon from './MapIcon'\n\nimport MapBgRight from '../../images/bg-right.png'\n\n\nconst MapGrid = styled.div<{ x: number, y: number }>`\n  position: relative;\n  display: flex;\n  flex-wrap: wrap;\n\n  width: calc(100% - 5vw);\n  height: 100%;\n\n  &:after {\n    position: absolute;\n    top: 0;\n    left: 100%;\n    width: 5vw;\n    height: 100%;\n    background-color: #fff;\n    background: url(${MapBgRight}) no-repeat left top / auto 100%;\n    content: \"\";\n  }\n\n  & > div {\n    ${props => (`\n      width: ${Math.floor(100 / props.x)}%;\n      height: ${Math.floor(100 / props.y)}%;\n    `)}\n  }\n`\n\nconst MapGridItem = styled.div<{ active: boolean, odd: boolean }>`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #22CBFF;\n\n  ${props => props.active && (`\n    border: 2px solid #ff9000;\n  `)}\n\n  ${props => props.odd && (`\n    background: #00B3DD;\n  `)}\n  // border: ${props => props.active ? \"2px solid #ff9000\" : \"none\"}\n\n  .mapIcon {\n    width: auto;\n    height: 60%;\n  }\n`\n\ntype Props = {\n  editable?: boolean\n}\n\nexport default function Map({ editable = false }: Props) {\n  const { map, mapX, mapY, activeMap, changeActiveMap } = React.useContext(GameContext)\n\n  return (\n    <MapGrid x={mapX} y={mapY}>\n      {map.map((val, index) => (\n        <MapGridItem\n          odd={(Math.floor(index / mapX) + index % mapX) % 2 === 1}\n          active={editable && activeMap === index}\n          key={index}\n          onClick={() => {\n            editable && changeActiveMap(activeMap === index ? -1 : index);\n          }}\n        >\n          <MapIcon type={val} />\n        </MapGridItem>\n      ))}\n    </MapGrid>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport GameContext from '../../contexts/GameContext'\n\nconst Button = styled.button<{ connect: boolean }>`\n  border: none;\n  background: none;\n\n  color: ${props => props.connect ? \"#0983fe\" : \"#000\"};\n  opacity: ${props => props.connect ? 1 : 0.2};\n\n  &:focus {\n    outline: none;\n  }\n`\n\nexport default function BluetoothButton() {\n  const { bluetoothConnect, setBluetoothDevice } = React.useContext(GameContext)\n  return (\n    <Button connect={bluetoothConnect} onClick={() => setBluetoothDevice()}>\n      <span className=\"material-icons\">bluetooth</span>\n    </Button>\n  )\n}","export default __webpack_public_path__ + \"static/media/start.71e137c8.svg\";","import React from 'react'\ntype audioT = \"bgm\" | \"drop\"\n\nconst soundMapper: Record<audioT, string> = {\n  \"bgm\": require(\"../sounds/bgm2.wav\").default,\n  \"drop\": require(\"../sounds/drop.wav\").default,\n}\n\ninterface audioPlayOptionT {\n  loop?: boolean;\n}\n\ninterface AudioPlayerContextT {\n  play(id: audioT, options?: audioPlayOptionT): void;\n  stop(id?: audioT): void;\n}\n\nconst AudioPlayerContext = React.createContext({} as AudioPlayerContextT);\n\nexport default AudioPlayerContext;\n\nexport const AudioPlayerProvider = ({ children }: React.PropsWithChildren<{}>) => {\n  const soundWrapperRef = React.useRef<HTMLDivElement>(null);\n\n  const getAudioElement = (id: audioT): HTMLAudioElement | null => {\n    return soundWrapperRef.current?.querySelector(`[data-id=\"${id}\"]`) || null;\n  };\n  const handlePlayMusic = (id: audioT, options: audioPlayOptionT) => {\n    const audio = getAudioElement(id);\n    \n    if (audio) {\n      audio.loop = Boolean(options?.loop);\n      if (!audio.paused) {\n        audio.pause();\n        audio.currentTime = 0;\n      }\n\n      audio.play();\n    }\n  };\n\n  const handleStopMusic = (id?: audioT) => {\n    if (id) {\n      const audio = getAudioElement(id);\n      if (audio) {\n        audio.pause();\n        audio.currentTime = 0;\n      }\n    } else {\n      (Object.keys(soundMapper) as audioT[]).forEach((key) => {\n        handleStopMusic(key);\n      });\n    }\n  };\n\n  return (\n    <AudioPlayerContext.Provider\n      value={{\n        play: handlePlayMusic,\n        stop: handleStopMusic,\n      }}>\n      {children}\n      <div ref={soundWrapperRef}>\n        {Object.entries(soundMapper).map(([key, src]) => (\n          <audio key={key} data-id={key} src={src} />\n        ))}\n      </div>\n    </AudioPlayerContext.Provider>\n  );\n};\n","import React from 'react'\nimport { getEmptyImage } from 'react-dnd-html5-backend'\nimport { useDrag, DragSourceMonitor, XYCoord, useDrop } from 'react-dnd'\n\nimport Card from './Card'\nimport { draggableCard, sortCardC } from '../../types/card'\nimport GameContext from '../../contexts/GameContext'\nimport _ from 'lodash'\nimport AudioPlayerContext from '../../contexts/AudioContext'\n\n\nexport default function SortableCard({\n  type, index, cardIndex, temp, parent\n}: sortCardC) {\n  const {\n    queue,\n    playArray,\n    tempQueue,\n\n    addQueue,\n    changeDraggingIndex,\n    replaceQueue,\n    reSortSetQueue,\n\n    draggingIndex\n\n  } = React.useContext(GameContext)\n  const { play } = React.useContext(AudioPlayerContext)\n  \n  const ref = React.useRef<HTMLDivElement>(null);\n  const [{ isOverCurrent }, drop] = useDrop({\n    accept: [\"sortCard\", \"card\"],\n    hover(item: draggableCard, monitor) {\n      if (!isOverCurrent || !ref.current) return;\n\n      const hoverCard = queue.filter(x => x.parent === parent)[index]\n      let hoverIndex = hoverCard ? _.findIndex(queue, [\"index\", hoverCard.index]) : index;\n\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\n      const clientOffset = monitor.getClientOffset();\n      const hoverWidth = hoverBoundingRect.right - hoverBoundingRect.left \n      const hoverClientX = (clientOffset as XYCoord).x - hoverBoundingRect.left;\n\n      if (item.type === \"card\") {\n        if (!tempQueue) return;\n        const tempQueueIndex = _.findIndex(queue, [\"index\", tempQueue.index])\n        const isRight = hoverClientX >= hoverWidth * 0.5;\n        if (hoverIndex === tempQueueIndex || (isRight && hoverIndex + 1 === tempQueueIndex)) return;\n\n        if (isRight) {\n          replaceQueue(tempQueueIndex, hoverIndex, false, true)\n        } else {\n          replaceQueue(tempQueueIndex, hoverIndex, false, false)\n        }\n      } else {\n        if (!tempQueue) {\n          addQueue(item.data.type, parent, true);\n        }\n        item.type = \"card\"\n      }\n    },\n\n    drop(item: draggableCard, monitor) {\n      if (monitor.didDrop() || !ref.current) return;\n\n      reSortSetQueue(\n        queue\n          .map((val) => {\n            return val.parent === draggingIndex ? ({\n              ...val,\n              parent: tempQueue ? tempQueue.index : val.parent\n            }) : val\n          })\n          .filter((val) => val.index !== draggingIndex)\n      )\n\n      play('drop')\n      return undefined\n    },\n\n    collect: (monitor) => ({\n      hovered: monitor.isOver(),\n      isOverCurrent: monitor.isOver({ shallow: true }),\n      item: monitor.getItem(),\n    })\n  })\n\n  const [{ isDragging }, drag] = useDrag({\n    item: {\n      type: \"sortCard\",\n      aIndex: index,\n      index: cardIndex,\n      sort: true,\n      data: { type }\n    },\n    begin: (monitor: DragSourceMonitor) => {\n      if (cardIndex) changeDraggingIndex(cardIndex)\n    },\n    end: () => {\n      changeDraggingIndex(Infinity)\n    },\n    collect: (monitor: DragSourceMonitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  })\n\n  drop(drag(ref));\n\n  return (\n    <div ref={ref} style={{\n      display: draggingIndex === cardIndex ? \"none\" : \"block\",\n      opacity: 1,\n      height: '50%',\n      position: 'relative'\n    }}>\n      <Card\n        active={playArray[0] === cardIndex}\n        cardIndex={cardIndex}\n        type={type}\n        temp={temp}\n      />\n    </div>\n  )\n}\n","import { render } from '@testing-library/react'\nimport { update } from 'lodash'\nimport React from 'react'\nimport { useDrop } from 'react-dnd'\nimport styled from 'styled-components'\nimport AudioPlayerContext from '../../contexts/AudioContext'\nimport GameContext from '../../contexts/GameContext'\nimport { card, cardSortEvent, cardType, draggableCard } from '../../types/card'\nimport Card from './Card'\nimport SortableCard from './SortableCard'\n\nconst Wrapper = styled.div<{ deps: number }>`\n  display: flex;\n  width: 100%;\n  height: 100%;\n  font-size: 0;\n\n  & .item:not(.for) {\n    width: ${props => `${2.45 - props.deps * 0.25}rem`};\n  }\n\n  & .item {\n    height: ${props => `${2.45 - props.deps * 0.25}rem`}\n  }\n\n  & .forStack {\n    min-width: ${props => `${2.45 - (props.deps + 1) * 0.25}rem`};\n  }\n`\n\ntype Props = {\n  cards?: Array<card>\n  parent?: number\n}\n\nexport function SortCardList({ parent }: Props) { \n  const {\n    queue,\n    tempQueue,\n    draggingIndex,\n\n    addQueue, \n    deleteQueue,\n    reSortSetQueue,\n    getQueueDeps,\n    updateQueue\n  } = React.useContext(GameContext)\n\n  const { play } = React.useContext(AudioPlayerContext)\n  const deps = getQueueDeps(parent)\n\n  const [{ hovered, item, isOverCurrent }, drop] = useDrop({\n    accept: [\"card\", \"sortCard\"],\n\n    hover() {\n      if (isOverCurrent && tempQueue && parent !== tempQueue.parent) {\n        console.log(\"hover!!\")\n        updateQueue(tempQueue.index, {\n          ...tempQueue,\n          parent\n        })\n      }\n    },\n\n    drop(item: draggableCard, monitor) {\n      if (monitor.didDrop()) return;\n\n      play('drop')\n      reSortSetQueue(\n        queue\n          .map((val) => {\n            return val.parent === draggingIndex ? ({\n              ...val,\n              parent: tempQueue ? tempQueue.index : val.parent\n            }) : val\n          })\n          .filter((val) => val.index !== draggingIndex)\n      )\n      return undefined\n    },\n\n    collect: (monitor) => ({\n      hovered: monitor.isOver(),\n      isOverCurrent: monitor.isOver({ shallow: true }),\n      item: monitor.getItem(),\n    }),\n  })\n\n  React.useEffect(() => {\n    if (parent === undefined) {\n      if (!tempQueue && hovered) {\n        addQueue(item.data.type, parent, true)\n      } else if (tempQueue && !hovered) {\n        deleteQueue(tempQueue.index);\n      }\n    }\n  }, [hovered])\n\n  const queues = queue.filter(x => x.parent === parent);\n\n  return (\n    <Wrapper deps={deps} ref={drop}>\n      {queues.map((val, k) => (\n        <div\n          key={val.index}\n          style={{\n            position: 'relative',\n            opacity: val.temp ? 0.5 : 1,\n          }}\n        >\n          {\n            !val.temp ? (\n              <SortableCard\n                parent={val.parent}\n                type={val.type}\n                cardIndex={val.index}\n                index={k}\n                temp={val.temp}\n              />\n            ) : (\n              <Card\n                cardIndex={val.index}\n                type={val.type}\n                temp={val.temp}\n              />\n            )\n          }\n        </div>\n      ))}\n      {\n        (parent === undefined) && (\n          <>\n            <div\n              style={{\n                position: 'relative',\n              }}\n            >\n              <Card\n                cardIndex={Infinity}\n                type=\"temp\"\n                temp={true}\n              />\n            </div>\n            <div\n              style={{\n                position: 'relative',\n              }}\n            >\n              <Card\n                cardIndex={Infinity}\n                type=\"temp\"\n                temp={true}\n              />\n            </div>\n          </>\n        )\n      }\n    </Wrapper>\n  )\n}\n\nexport default function CardList({ cards = [] }: Props) {\n  return (\n    <Wrapper deps={0}>\n      {cards.map((val, k) => (\n        <div\n          key={k}\n          style={{\n            position: 'relative',\n            left: `${(k + 1) * -0.38}rem`\n          }}\n        >\n          <Card\n            cardIndex={val.index}\n            type={val.type}\n            temp={false}\n          />\n        </div>\n      ))}\n    </Wrapper>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport forStartImg from '../../images/for-start.png'\nimport forEndImg from '../../images/for-end.png'\nimport { useDrop, XYCoord } from 'react-dnd'\nimport { card, cardSortEvent, draggableCard } from '../../types/card'\nimport { SortCardList } from './CardList'\n\nconst ForWrapper = styled.div`\n  position: relative;\n  width: auto;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n`\n\nconst ForStack = styled.div`\n  position: relative;\n  z-index: 1000;\n  min-width: 2.45rem;\n  height: 100%;\n  border-top: .25rem solid #ce81fe; \n`\n\nconst ForRangeInput = styled.input`\n  position: absolute;\n  z-index: 101;\n  right: .45rem;\n  bottom: 5%;\n\n  width: 1.2rem;\n  height: .5rem;\n  background: #fff;\n  border: none;\n  border-radius: 300px;\n  text-align: center;\n  font-size: 0.5rem;\n\n  &:focus {\n    outline: none;\n  }\n`\n\ntype Props = {\n  cardIndex?: number\n  temp: boolean\n}\n\nexport default function ForCard({ cardIndex, temp }: Props) {\n\n  return (\n    <ForWrapper>\n      <img src={forStartImg} alt=\"for문 시작\"/>\n      <ForStack className=\"forStack\">\n        {(cardIndex !== -1 && !temp) && (\n          <SortCardList\n            parent={cardIndex}\n          />\n        )}\n      </ForStack>\n      <img src={forEndImg} alt=\"for문 끝\"/>\n      <ForRangeInput defaultValue=\"2\" id={`for-${cardIndex}`} />\n    </ForWrapper>\n  )\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAABlCAYAAADOM/pSAAAACXBIWXMAAAsSAAALEgHS3X78AAABDElEQVRoge3bwU3DQBgF4WeLQigBdwCdUAIVGJRKkg5SAh0EOoAOoIJFa9kIpHCZA/kPM4c9+PRp19c3tNayddq16yT3SW5z+fZXP2BPSR4LoLaex9SELY3rU5aD9frNPRRwnK3jbgq6lsYChj8TRxNHE0cTRxNHE0cTRxNHE0cTRxNHE0cTRxNHE0cTRxNHE0cTRxNHE0cTRxNHE0cTRxNHE0cTRxNHE0cTRxNHE0cTRxNHE0cTRxNHE0cTRxNHE0cTRxNHq4x76bhjAci5lgnpPslnMdhhmoePsR/rGrhKr9tydPnnpnnoT3uX5P3CwEOfTK8Xll+b6t5p1/qe+r831R1znObh7ftLki+CVym43fTOjwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,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\"","import React from \"react\";\nimport styled from 'styled-components'\n\nimport startImg from '../../images/start.svg'\nimport leftRotateImg from '../../images/left-rotate.png'\nimport rightRotateImg from '../../images/right-rotate.png'\nimport goImg from '../../images/go.png'\nimport { cardC } from \"../../types/card\";\nimport ForCard from \"./ForCard\";\n\nconst Item = styled.div<{ active: boolean }>`\n  position: relative;\n  height: 2.45rem;\n  font-size: 0;\n\n  ${props => props.active && `\n    z-index: 1000;\n    box-shadow: 0 0 5px 2px #fff;\n  `}\n\n  > div {\n    height: 100%;\n  }\n\n  img {\n    width: auto;\n    height: 100%;\n  }\n\n  &.for {\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n    width: auto;\n  }\n`\n\nexport default React.forwardRef(function Card({\n  type,\n  cardIndex,\n  active = false,\n  temp = false,\n  ...props \n}: cardC, ref) {\n\n  return (\n    <Item {...props} active={active} className={`${type} item`}>\n      {type === \"start\" && <img src={startImg} alt=\"시작 이미지\" />}\n      {type === \"go\" && <img src={goImg} alt=\"직진\"/>}\n      {type === \"left-rotate\" && <img src={leftRotateImg} alt=\"왼쪽으로 90도 회전\"/>}\n      {type === \"right-rotate\" && <img src={rightRotateImg} alt=\"오른쪽으로 90도 회전\"/>}\n      {type === \"for\" && (\n        <ForCard\n          cardIndex={cardIndex}\n          temp={temp}\n        />\n      )}\n    </Item>\n  )\n})","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAYAAABUfC3PAAAACXBIWXMAAAsSAAALEgHS3X78AAAJKElEQVR4nO2d61IbNxTHj+Q7l+AEwi2hkCYDM+k0ZNoP5WPeoH2EPkrepJM36CP0I1+ahs6UTtKmJTeCCXeMDbZ31TlaSatdr4FMsVZr9Kc7xDZtbP0450jnsiWMMUjU2spjAKgmv+h0RTqA5dUX8f9UFEoA4ikAfO9W3aie8XVfXt2ACJS1lR8B4Kdrsgg26hAAnqDlBFACC/ntuq+KBUIwj6l4H0+v9VLYozFkIS2lR7R3SkGHFNZWnriVt0pjNENv9trIQbFQDoqFclAslINioRwUC+WgWCgHxUI5KBbKQbFQDoqFclAslINioRwUC5UftA90eubD1m4b8jkCd6eKFryjz9dAQak3PFh72QDPA2AQ1O2yCGZg3BcC+f1VEzwf20HwHwIdL5sF1YGwFB0IIYQ/Jy0li8o8lCQgyMNBSUkSiO8ToJSoN4FA0H1lVZmFooAwAoQSbiX4JS2kZztuBpRJKDoQSmkARHNdKPU4g8oclF5AJARlLRRga8eDo3oTxkYojFfzMDKUS/39X0aZgpIEhBIabIGlZZDAWiij3IXVGwyOTzx4t9WBYgE4nDuTBSiX7D0NZAaKHtRVDCFEAVFbYYaPw38Pfxbh4FfbY/BxpwObn9oweSsP8zNFK+FkBsrOQYef1LlhaK4K1BUoeEk+RmIsiDNMuDbCOKRP+x5s7zVgbrrAT/2YlrFFmT/R947nRL2m4o6wMHR56P7werfVhufrDW6JtigzUCaqecjlxMFQbHe5U2Is3HIJBS8z0HfF8tyibww4IEqh1QF4/mcDtnbahj9VsjIDBXdOjxYrQGkAQl4BJBCPQUHSv8uYoqTFIbQaCeevt2fw+t1p2h81W+5LgSEMfN/ni+0zn1NhCZf8GR2gLrlR4O5MwNn81IGX/zZT/ZyZiym9wAQL7ysYeHmepy7+HL7uRwHp8YbHGUJhe9+DD9ut1D5jJgN9HIy8OBg/uPDx7SqF6YkcFPIsCka4M5WKEal+BYdQ+Od9i+/40lBmd186GPnbz2Gw0GWVShQezJXhu69HYHG+zOH4XgxiDzD4/dXGKa9kmlamt8R68O9pBULTEwX49uEwzM0UAiB+bMMA4fEG4aC14EH15Yb5wJ/5c4oEk6PQvcgx4QFxYbYEjxaHgJDQWvRttgz+3HIogaO6b3yrPBDl4Igr67HT0lUdzcHy0lDE9XHFg79wZW8/mg36A1OjRzC40GgxsvJ4XupE/jx3fZrbkyLyixA4azOj1jJQfV9yocdGczBRLfA4ctHPf3m31HXG4SLR4G/SWgau70uCuawQ3O5BB/aPfO6q9CqyTGDi97OWDwfHHnd9/ZbrkASA+3OlyFZaeTGZjhHWUtsxYy0OCgCvqUzdyouUTUInjHBlu4dmMskOitD8bCkEoucuNUvBNiYTKX4HRQitZagSVikjxkLC1H+90f8TvnEo+JuGATON9MVFwvo9qCNLtwtDazlp9t9SjO2+EMYffzf5np+LAd+6YpC1pcukOprnlUjOI74LE5AGxlJkN3yrHU2VH9aD521pxC4Xybktr6a6Lo1AebPZinShyIKSDJ4bm2cm3saFwriSCETGFAK8eaPfMuK+dg87AQjxweK/cScGXMJVqT5IMUWlLSLtQSAa5uzpJLlII5X+xz+jaRaZ5JNdjCDOAZ4lMQVjW2Lc0M4vOQN7EiMxZbgi/hq9by72Zxu2yHxndU4sNzXzYgTKeSl0eWKuN22AErjRuLXoMPgOrc8yAmVkiMpPpz60TF2IJ2B3P/1GuMNjL6w8xiSTlcMGzlSG3FcusSEOtCpfWp0jUhhPcJdItC+uWAOmiYOuESh6DUKvn+utpHheSbNt9H2tFanPh0zCRgy8BqaewpN9ZRLpAebS6hV4jqntpgMFrWRzux2dCNMl3u74mJnNqrGEpEr2JW1gBBxMu6RhLWglcrpYbdshdF3SUvhnMCBjUKbHC8oV6HDibaPYYG0yF4Y7Lqy/y9RPL9eFDRkX1fyvSsagoAu7dSMM+F2dIwIOjs5hktKEEP7669NgVE+bMOZi4dgFXrOTZoCA6XrKnalitA6u18IhTFY2mqzvne8IBOFjKSHitnpYicl7vBiFgjuXXtaigj4Nrtpeh9df+uHKMHuAQBqnTA20RtyW1jUprcTk+J3xyiMWtfROxsgWWZuuwmvvKKi3XGXCEs9Dv66fRIAkzeFLKykVzN+iyjgUjC3zs8XonEi8UUEDg4uHo29Yc/k/VoPWgZa3/roJDGhPIOpMIkYqFhfKxodUU2nGuzNZ5HV6bIBjwdguEEYip3wpXDxcJCzTfqi1+OwjxqbLnqzRMjCFg+5QwdZm7/XArh8Ssd0IO/RNHBbjSq1DcmmhzOfiG6c+vxFBEhh9xFpeOGVV22twt4JghocolItUzcOjRZy2fF44OzjuqPNH4t0pkixEWAnO2WOHfhpKDQq6BOyUx3HpVsfnixYHo1cpcQF1OO0O8JiDV3z0IVx0CjnafQMEfZeVBKRSDmJfWkq1l1iCwbNC48wPb+sRc2GR+66ImxWwMCJ31Tn0RY/8OZZCUWkfbQrsxjCFrx5UUr3ZQerNeOh2Hi1VoIINirHxuK6UjLZtVs0XNNwUyCvSoEFjwRyih0J9ZnLyZtAcnvbdJ6zokMRFwNG3mdu5cPRNA3Revuy8q6suwqLTXvLCLfq9u0VYulcx9InPl1WjEPfnyjBe9fgAaKsj6uW4kIRFYstnKcHV6UDQXeHfa9Ntp6ybT8Et6DcPh3jmFtPp/M53TMyJENLVvXihtKYHHQju3r6YKRlLMn6OrBwakgOjeJLGGsuHWjvMUQkwl7EYPZDL72gZU+NFK2FIWT3JhXDwoIkXplpw4gpnRE6afnRb20MSBoKYuJnnRSqbb74mlZnxOvT5eM3PBo8xI4Bpl5MeebGx0Tzkc2Zq6letzM48yvTHhKFqoEm5oSEL5aBYKAfFQjkoFspBsVAOioVyUCyUg2KhHBQL5aBYKAfFQjkoFspBsVAOioUivBC0tpLd/6vY4OmNtJRn130lLNLP0lIWAOAFFuyu+4qkrEMAWAgsZXl1AwB+EE86pSNc+yewvHoQBvrl1V8A4LFwZQ6OOeFa45ovwPLqCwCA/wAcikNratMP2QAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,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\"","import React from 'react'\nimport { getEmptyImage } from 'react-dnd-html5-backend'\nimport { useDrag, DragSourceMonitor } from 'react-dnd'\n\nimport Card from './Card'\nimport { cardC } from '../../types/card'\n\ntype Props = {\n  val: number\n  begin?: () => void\n} & cardC \n\nexport default function DraggableCard({ type, val }: Props) {\n  const [{ isDragging }, drag, preview] = useDrag({\n    item: { type: \"card\", data: { type } },\n    collect: (monitor: DragSourceMonitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  })\n\n  React.useEffect(() => {\n    preview(getEmptyImage(), { captureDraggingState: true })\n  }, [])\n\n  return (\n    <div ref={drag}>\n      <Card type={type} cardIndex={-1} />\n    </div>\n  )\n}\n","import { on } from 'process'\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst PlayBtn = styled.div`\n  position: relative;\n  z-index: 2;\n  width: 3.5rem;\n  height: 3.5rem;\n  margin-right: .5rem;\n  border-radius: 50%;\n  font-size: 0;\n\n  &:before {\n    position: absolute;\n    z-index: -1;\n    left: 0;\n    bottom: -.25rem;\n    width: 100%;\n    height: 100%;\n\n    border-radius: 50%;\n\n    background: #db7e19;\n    content: '';\n  }\n`\n\nconst PlayBtnWrapper = styled.div<{pushing: boolean, reset?: boolean}>`\n  position: relative;\n  bottom: ${props => props.pushing ? '-0.25rem' : '0'};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  height: 100%;\n\n  background: #f6941b;\n  border-radius: 50%;\n\n  transition: 150ms ease;\n\n  img {\n    width: 30%;\n  }\n\n  ${props => props.reset && (`\n    img {\n      width: 50%;\n    }\n  `)}\n`\n\ntype Props = {\n  onClick: () => void\n  children?: React.ReactNode\n  reset?: boolean\n}\n\nexport default function PlayButton({ onClick, reset, children }: Props) {\n  const [pushing, setPushing] = React.useState(false)\n\n  return (\n    <PlayBtn\n      onTouchStart={(e) => {\n        setPushing(true)\n      }}\n      onTouchEnd={(e) => {\n        setPushing(false)\n      }}\n      onClick={() => onClick()}\n    >\n      <PlayBtnWrapper reset={reset} pushing={pushing}>\n        {children}\n      </PlayBtnWrapper>\n    </PlayBtn>\n  )\n}\n","export default __webpack_public_path__ + \"static/media/play.b9298dae.svg\";","export default __webpack_public_path__ + \"static/media/reset.e9744735.svg\";","import React from 'react'\nimport styled from 'styled-components'\nimport GameContext from '../../contexts/GameContext'\nimport Card from '../card/Card'\n\n\nimport { SortCardList } from '../card/CardList'\nimport PlayButton from './PlayButton'\n\nimport playImg from '../../images/play.svg'\nimport resetImg from '../../images/reset.svg'\n\nconst QueueForm = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n`\n\nconst QueueWrapper = styled.div`\n  position: relative;\n  display: flex;\n  flex-wrap: nowrap;\n  width: 55%;\n  overflow: hidden;\n\n  box-shadow: inset 1px 1px 1px rgba(0, 0, 0, .5);\n  border-radius: 100rem;\n\n  padding-top: .5rem;\n  padding-bottom: .5rem;\n  padding-left: 1rem;\n  margin-right: 1rem;\n\n  background: #A6F7FF;\n`\n\nconst QueueScrollControl = styled.button<{isLeft?: boolean}>`\n  position: absolute;\n  z-index: 1001;\n  top: 0;\n  ${props => props.isLeft ? `left: 0;` : `right: 0;`}\n  width: 8%;\n  height: 100%;\n  background: rgba(0, 0, 0, .2);\n  color: #fff;\n  border: none;\n`\n\nconst Queue = styled.div`\n  display: flex;\n  flex: 1;\n  font-size: 0;\n  overflow-x: auto;\n`\n\nexport default function QueueControl() {\n  const { sendQueueData, sendResetMessage } = React.useContext(GameContext)\n  const ref = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    if (ref.current !== null) {\n      console.log(ref.current.scrollLeft);\n    }\n  }, [ref])\n\n  return (\n    <QueueForm>\n      <QueueWrapper>\n        <QueueScrollControl\n          onTouchStart={() => {\n            if (ref.current) ref.current.scrollLeft -= 10;\n          }}\n          isLeft={true}\n        >\n          <span className=\"material-icons\">keyboard_arrow_left</span>\n        </QueueScrollControl>\n        <Card type=\"start\" />\n        <Queue ref={ref}>\n          <SortCardList />\n        </Queue>\n        <QueueScrollControl \n          onTouchStart={() => {\n            if (ref.current) ref.current.scrollLeft += 10;\n          }}\n        >\n          <span className=\"material-icons\">keyboard_arrow_right</span>\n        </QueueScrollControl>\n      </QueueWrapper>\n      <PlayButton onClick={() => sendQueueData()}>\n        <img src={playImg} alt=\"play\" />\n      </PlayButton>\n      <PlayButton reset onClick={() => sendResetMessage()}>\n        <img src={resetImg} alt=\"reset\" />\n      </PlayButton>\n    </QueueForm>\n  )\n}\n","import React from \"react\";\nimport styled from 'styled-components'\n\nimport { useDrop } from 'react-dnd'\n\nimport { cardType, draggableCard } from \"../../types/card\";\n\nimport DraggableCard from \"../card/DraggableCard\";\nimport QueueControl from \"./QueueControl\";\nimport GameContext from \"../../contexts/GameContext\";\nimport AudioPlayerContext from \"../../contexts/AudioContext\";\n\nconst Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: center;\n  width: 100%;\n`\n\nconst QueueControlWrapper = styled.div`\n  width: 100%;\n  bottom: 100%;\n`\n\nconst ItemWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  box-shadow: inset 0px 1px 1px rgba(0, 0, 0, .5);\n\n  width: 100%;\n  padding-top: .5rem;\n  padding-bottom: .5rem;\n  background: rgba(0, 0, 0, .1);\n\n  & > div {\n    margin-left: .5rem;\n    margin-right: .5rem;\n  }\n`\n\nconst usingCards: Array<cardType> = [\"go\", \"left-rotate\", \"right-rotate\", \"for\"]\n\nexport default function Control() {\n  const { deleteQueue } = React.useContext(GameContext)\n  const { play } = React.useContext(AudioPlayerContext)\n  \n  const [, drop] = useDrop({\n    accept: \"sortCard\",\n    drop(item: draggableCard) {\n      play(\"drop\")\n      deleteQueue(item.index);\n      return undefined\n    },\n  })\n\n  return (\n    <Wrapper>\n      <QueueControlWrapper>\n        <QueueControl />\n      </QueueControlWrapper>\n      <ItemWrapper ref={drop}>\n        {usingCards.map((card, k) => (\n          <DraggableCard\n            val={k}\n            type={card}\n            key={k}\n          />\n        ))}\n      </ItemWrapper>\n    </Wrapper>\n  )\n}","import React from 'react'\nimport { XYCoord, useDragLayer } from 'react-dnd'\nimport GameContext from '../../contexts/GameContext'\nimport Card from '../card/Card'\nimport CardList from '../card/CardList'\n\nconst layerStyles: React.CSSProperties = {\n  position: 'fixed',\n  pointerEvents: 'none',\n  zIndex: 1002,\n  left: 0,\n  top: 0,\n  width: '100%',\n  height: '100%',\n}\n\nfunction getItemStyles(\n  initialOffset: XYCoord | null,\n  currentOffset: XYCoord | null,\n  isSnapToGrid: boolean,\n) {\n  if (!initialOffset || !currentOffset) {\n    return {\n      display: 'none',\n    }\n  }\n\n  let { x, y } = currentOffset\n\n  const transform = `translate(${x}px, ${y}px)`\n\n  return {\n    transform,\n    WebkitTransform: transform,\n  }\n}\n\nexport interface CustomDragLayerProps {\n  snapToGrid: boolean\n}\n\nexport const CustomDragLayer: React.FC<CustomDragLayerProps> = (props) => {\n  const { queue, draggingIndex } = React.useContext(GameContext)\n\n  const {\n    itemType,\n    isDragging,\n    item,\n    initialOffset,\n    currentOffset,\n  } = useDragLayer((monitor) => ({\n    item: monitor.getItem(),\n    itemType: monitor.getItemType(),\n    initialOffset: monitor.getInitialSourceClientOffset(),\n    currentOffset: monitor.getSourceClientOffset(),\n    isDragging: monitor.isDragging(),\n  }))\n\n  function renderItem() {\n    switch (itemType) {\n      case \"card\":\n        return <Card cardIndex={-1} type={item.data.type} />\n      case \"sortCard\":\n        return <Card cardIndex={item.index} type={item.data.type} />\n      default:\n        return null\n    }\n  }\n\n  if (!isDragging) {\n    return null\n  }\n  return (\n    <div style={layerStyles}>\n      <div\n        style={getItemStyles(initialOffset, currentOffset, props.snapToGrid)}\n      >\n        {renderItem()}\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport Map from './Map'\n\nconst MapEditWrapper = styled.div`\n  width: 100vh;\n  height: 80vh;\n  margin: 0 auto;\n`\n\nexport default function MapEdit() {\n  return (\n    <MapEditWrapper>\n      <Map editable={true} />\n    </MapEditWrapper>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport GameContext from '../../contexts/GameContext'\nimport { coins, coinT, isStartCoin } from '../../types/coin'\nimport MapIcon from './MapIcon'\n\nconst MapEditWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 20vh;\n`\n\nconst EditButton = styled.button`\n  height: 100%;\n  background: none;\n  border: none;\n\n  margin: 0 1rem;\n\n  color: #e91e63;\n\n  & span {\n    font-size: 2rem;\n  }\n\n  & img {\n    height: 50%;\n  }\n`\n\nexport default function MapEdit() {\n  const { activeMap, updateMap, mapStartIndex, mapEndIndex, mapX, mapY } = React.useContext(GameContext)\n\n  return (\n    <MapEditWrapper>\n      {coins.filter((type) => (\n        (type === \"start-left\" && activeMap % mapX !== 0) ||\n        (type === \"start-right\" && activeMap % mapX !== mapX - 1) ||\n        (type === \"start-up\" && activeMap > mapX - 1) ||\n        (type === \"start-down\" && activeMap < (mapX - 1) * mapY) ||\n        !isStartCoin(type) ||\n        activeMap === -1\n      )).map((type, index) => (\n        <EditButton key={index} onClick={() => {\n          if (isStartCoin(type) && mapStartIndex !== -1) {\n            updateMap(mapStartIndex, \"empty\")\n          } else if (type === \"end-point\" && mapEndIndex !== -1) {\n            updateMap(mapEndIndex, \"empty\")\n          }\n\n          activeMap !== -1 && updateMap(activeMap, type)\n        }}>\n          {type === \"empty\" ? (\n            <span className=\"material-icons\">delete</span>\n          ) : (<MapIcon type={type} />)}\n        </EditButton>\n      ))}\n    </MapEditWrapper>\n  )\n}\n","import styled from \"styled-components\"\n\nexport const Modal = styled.div<{ visible: boolean }>`\n  display: ${props => props.visible ? \"flex\" : \"none\"};\n  align-items: center;\n  justify-content: center;\n  position: fixed;\n  z-index: 1001;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, .5);\n`\n\nexport const ModalPopup = styled.div`\n  border-radius: 1rem;\n  background: #fff;\n`","import _ from 'lodash'\nimport React from 'react'\nimport styled from 'styled-components'\nimport GameContext from '../../contexts/GameContext'\nimport { Modal, ModalPopup } from '../../style'\nimport { rankingT } from '../../types/ranking'\n\nconst Wrapper = styled.div`\n  width: 40vw;\n  max-height: 80vh;\n  overflow: auto;\n  padding: 1rem;\n`\n\nconst Title = styled.div<{ success: boolean }>`\n  margin-bottom: 1rem;\n\n  font-size: 2rem;\n  font-weight: bold;\n  text-align: center;\n\n  color: ${props => props.success ? \"#05adff\" : \"#ff6160\"} ;\n\n  p {\n    font-size: 40%;\n    font-weight: normal;\n    color: #666;\n  }\n`\n\nconst ScoreWrapper = styled.div`\n  width: 100%;\n  padding: 1rem;\n  margin-bottom: 1rem;\n\n  border-radius: .5rem;\n  background: #ededed;\n  font-size: 2.5rem;\n  text-align: center;\n`\n\nconst RankingWrapper = styled.div`\n  width: 100%;\n  margin-bottom: 1rem;\n\n  border-radius: .5rem;\n  background: #ededed;\n  overflow: hidden;\n`\n\nconst RankingList = styled.div`\n  width: 100%;\n  height: 20vh;\n  overflow: auto;\n  padding: .5rem 1rem;\n\n  & .ranking-item:nth-child(1) .rank {\n    color: #f5d600;\n  }\n  & .ranking-item:nth-child(2) .rank {\n    color: #d3d3d3;\n  }\n  & .ranking-item:nth-child(3) .rank {\n    color: #d75e1f;\n  }\n`\n\nconst RankingItem = styled.div`\n  display: flex;\n  justify-content: space-between;\n\n  padding: .5rem 0;\n\n  .rank {\n    font-weight: bold;\n  }\n`\n\nconst RankingForm = styled.form`\n  width: 100%;\n  height: 2rem;\n`\n\nconst RankingInput = styled.input`\n  width: 60%;\n  height: 100%;\n\n  padding: 0 1rem;\n\n  border: none;\n  background: #ddd;\n`\n\nconst RankingButton = styled.button`\n  width: 40%;\n  height: 100%;\n\n  background: #00c55a;\n  color: #fff;\n  border: none;\n`\n\nconst ActionButton = styled.button`\n  width: 100%;\n  border: none;\n  background: none;\n\n  padding: .5rem 0;\n\n  border-radius: .5rem;\n\n  background: #00c55a;\n  color: #fff;\n  font-size: 1.4rem;\n`\n\nexport default function ResultModal() {\n  const [name, setName] = React.useState(\"\")\n  const [rankingAdd, setRankingAdd] = React.useState(false)\n  const { score, map, resultVisible, ranking, updateResultVisible, putMap, addRanking } = React.useContext(GameContext)\n\n  const isSuccess = map.filter(x => x === \"end-point\").length === 0;\n  const mapRanking: Array<rankingT> = _.orderBy(ranking[localStorage.getItem(\"map\") || \"\"] || [], ['score'], ['desc'])\n\n  return (\n    <Modal visible={resultVisible}>\n      <ModalPopup>\n        <Wrapper>\n          <Title success={isSuccess}>\n            {\n              isSuccess ? (\n                <>\n                  성공!\n                  <p>냠냠~ 모두 다 먹었어요!</p>\n                </>\n              ) : (\n                <>\n                  실패\n                  <p>아직 당근이 남아있어요 쩝...</p>\n                </>\n              )\n            }\n          </Title>\n          <ScoreWrapper>{isSuccess ? score : 0} 점</ScoreWrapper>\n          {\n            isSuccess && (\n              <RankingWrapper>\n                <RankingList>\n                  {\n                    mapRanking.map((rank, index) => (\n                      <RankingItem key={index} className=\"ranking-item\">\n                        <div><span className=\"rank\">{index + 1}위</span> {rank.name}</div>\n                        <span>{rank.score}점</span>\n                      </RankingItem>\n                    ))\n                  }\n                </RankingList>\n                <RankingForm onSubmit={(e) => {\n                  e.preventDefault();\n\n                  if (name === \"\") {\n                    alert(\"이름을 입력해주세요.\")\n                  } else {\n                    addRanking(name)\n                    setName(\"\")\n                    setRankingAdd(true)\n                  }\n                }}>\n                  <RankingInput\n                    value={name}\n                    readOnly={rankingAdd}\n                    onChange={(e) => {\n                      setName(e.target.value)\n                    }}\n                    placeholder=\"이름을 입력해주세요.\"\n                  />\n                  <RankingButton disabled={rankingAdd}>등록</RankingButton>\n                </RankingForm>\n              </RankingWrapper>\n            )\n          }\n          <ActionButton onClick={() => {\n            setRankingAdd(false)\n            updateResultVisible(false)\n            // putMap(JSON.parse(localStorage.getItem(\"map\") || \"[]\"));\n          }}>확인</ActionButton>\n        </Wrapper>\n      </ModalPopup>\n    </Modal>\n  )\n}","import React from \"react\";\nimport { DndProvider } from 'react-dnd-multi-backend';\nimport HTML5toTouch from 'react-dnd-multi-backend/dist/esm/HTML5toTouch'; \nimport styled from 'styled-components'\nimport GameContext, { GameContextProvider } from \"../contexts/GameContext\";\nimport Map from './game/Map'\nimport BluetoothButton from \"./game/BluetoothButton\";\n\nimport Control from \"./game/Control\";\nimport { CustomDragLayer } from \"./game/CustomDragLayer\";\nimport AudioPlayerContext from \"../contexts/AudioContext\";\nimport PlayButton from \"./game/PlayButton\";\nimport MapEditComponent from './game/MapEdit'\nimport MapEditControl from \"./game/MapEditControl\";\nimport ResultModal from \"./game/ResultModal\";\n\nimport playImg from '../images/play.svg'\n\nconst Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  width: 100%;\n  height: 100%;\n`\n\nconst MapWrapper = styled.div`\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  width: 100%;\n`\n\nconst ControlWrapper = styled.div`\n  width: 100%;\n`\n\nconst StatusBar = styled.div`\n  position: absolute;\n  right: 1rem;\n  top: 1rem;\n`\n\nconst StartWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n`\n\nconst MapScreen = styled.div`\n  position: relative;\n  width: calc(60vh + 5vw);\n  height: 56vh;\n\n  background: #008399 ;\n  border: .5rem solid #008399;\n\n  & > img {\n    width: auto;\n    height: 100%;\n  }\n`\n\nconst SettingButton = styled.button`\n  position: absolute;\n  z-index: 1001;\n  right: -1rem;\n  top: -1rem;\n\n  width: 2rem;\n  height: 2rem;\n  border-radius: .5rem;\n  background: #f6941b;\n  border: none;\n\n  color: #fff;\n\n  span {\n    font-size: 1rem;\n  }\n`\n\nconst BackButton = styled.button`\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n\n  background: none;\n  border: none;\n\n  span {\n    font-size: 2rem;\n  }\n`\n\nfunction GameStart() {\n  const { page, changePage } = React.useContext(GameContext)\n  const { play } = React.useContext(AudioPlayerContext)\n\n  return (\n    <>\n      {\n        page === \"gameStart\" &&\n        <StartWrapper>\n          <PlayButton onClick={() => {\n            changePage(\"game\")\n            play(\"bgm\", {\n              loop: true\n            })\n          }}>\n            <img src={playImg} alt=\"paly btn\"/>\n          </PlayButton>\n        </StartWrapper>\n      }\n    </>\n  )\n}\n\n\nfunction GamePlay() {\n  const { page, changePage } = React.useContext(GameContext)\n  return (\n    <>\n      {\n        page === \"game\" &&\n        <Wrapper>\n          <MapWrapper>\n            <StatusBar>\n              <BluetoothButton />\n            </StatusBar>\n            <MapScreen>\n              <SettingButton onClick={() => changePage(\"mapEdit\")}>\n                <span className=\"material-icons\">settings</span>\n              </SettingButton>\n              <Map />\n            </MapScreen>\n          </MapWrapper>\n          <ControlWrapper>\n            <Control />\n          </ControlWrapper>\n        </Wrapper>\n      }\n\n      <ResultModal />\n    </>\n  )\n}\n\nfunction MapEdit() {\n  const { page, changePage, saveMap } = React.useContext(GameContext)\n\n  return (\n    <>\n      {\n        page === \"mapEdit\" &&\n        <Wrapper>\n          <BackButton onClick={() => {\n            changePage(\"game\");\n            saveMap();\n          }}><span className=\"material-icons\">keyboard_backspace</span></BackButton>\n          <MapEditComponent />\n          <MapEditControl />\n        </Wrapper>\n      }\n    </>\n  )\n}\n\nexport default function Game() {\n  return (\n    <GameContextProvider>\n      <DndProvider options={HTML5toTouch}>\n        <CustomDragLayer snapToGrid={false} />\n        <GamePlay />\n        <MapEdit />\n        <GameStart />\n      </DndProvider>\n    </GameContextProvider>\n  )\n}","import React from 'react';\nimport Game from './components/Game';\n\nimport { AudioPlayerProvider } from './contexts/AudioContext';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <AudioPlayerProvider>\n        <Game />\n      </AudioPlayerProvider>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}