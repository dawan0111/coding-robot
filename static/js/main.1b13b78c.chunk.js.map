{"version":3,"sources":["contexts/GameContext.tsx","components/game/BluetoothButton.tsx","images/start.svg","images/left-rotate.svg","images/right-rotate.svg","images/go.svg","components/card/Card.tsx","components/card/DraggableCard.tsx","images/play.svg","components/card/SortableCard.tsx","components/card/CardList.tsx","components/game/QueueControl.tsx","components/game/Control.tsx","components/game/CustomDragLayer.tsx","components/Game.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["windowNavigator","navigator","GameContext","React","createContext","GameContextProvider","children","useState","queue","setQueue","bluetoothConnect","setBluetoothConnect","Infinity","draggingIndex","setDraggingIndex","tempQueue","useMemo","find","x","temp","reSortSetQueue","useCallback","currentIndex","reduce","acc","val","type","index","addQueue","length","undefined","updateQueue","payload","map","deleteQueue","filter","deleteNextQueue","replaceQueue","droppingIndex","movingQueue","putIndex","_","findIndex","changeQueue","setBluetoothDevice","bluetooth","requestDevice","filters","services","then","device","gatt","connect","server","getPrimaryService","service","getCharacteristic","characteristic","data","Uint8Array","writeValue","catch","error","console","changeDraggingIndex","Provider","value","Button","styled","button","props","BluetoothButton","useContext","onClick","className","Item","div","forwardRef","ref","src","startImg","alt","goImg","leftRotateImg","rightRotateImg","DraggableCard","useDrag","item","collect","monitor","isDragging","drag","preview","useEffect","getEmptyImage","captureDraggingState","SortableCard","withDragging","moveCard","dropCard","updateCard","useRef","useDrop","accept","drop","hover","dragIndex","hoverIndex","current","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","sort","begin","end","opacity","style","Wrapper","SortCardList","cards","k","position","left","CardList","QueueForm","QueueWrapper","Queue","PlayBtn","PlayBtnWrapper","pushing","QueueControl","setPushing","hovered","isOver","getItem","addingCard","onTouchStart","onTouchEnd","playImg","ItemWrapper","usingCards","Control","card","layerStyles","pointerEvents","zIndex","width","height","getItemStyles","initialOffset","currentOffset","isSnapToGrid","display","transform","WebkitTransform","CustomDragLayer","useDragLayer","itemType","getItemType","getInitialSourceClientOffset","getSourceClientOffset","snapToGrid","renderItem","MapWrapper","ControlWrapper","StatusBar","Game","DndProvider","backend","TouchBackend","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","log"],"mappings":"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","file":"static/js/main.1b13b78c.chunk.js","sourcesContent":["import _ from 'lodash'\nimport React from 'react'\nimport { card, cardType } from '../types/card'\n\n// eslint-disable-next-line @typescript-eslint/no-use-before-define\nconst windowNavigator: any = navigator\n\ninterface valueT {\n  queue: Array<card>\n  tempQueue: card | undefined\n  bluetoothConnect: boolean\n  draggingIndex: number\n\n  addQueue: (type: cardType, temp?: boolean) => void\n  updateQueue: (index: number, payload: card) => void\n  deleteQueue: (index: number) => void\n  deleteNextQueue: (index: number) => void\n  replaceQueue: (index1: number, index2: number) => void\n  reSortSetQueue: (queue: Array<card>) => void\n\n  setBluetoothDevice: () => void\n\n  changeDraggingIndex: (index: number) => void\n}\n\nconst GameContext = React.createContext({} as valueT)\n\nexport default GameContext\n\nexport function GameContextProvider({ children }: React.PropsWithChildren<{}>) {\n  const [queue, setQueue] = React.useState<Array<card>>([])\n  const [bluetoothConnect, setBluetoothConnect] = React.useState(false)\n  const [draggingIndex, setDraggingIndex] = React.useState(Infinity)\n\n  const tempQueue = React.useMemo(() => (\n    queue.find(x => x.temp === true)\n  ), [queue])\n\n  const reSortSetQueue = React.useCallback((queue: Array<card>) => {\n    let currentIndex = 0;\n\n    setQueue(\n      queue.reduce((acc, val) => (\n        [...acc, {\n          type: val.type,\n          index: currentIndex++,\n          temp: false,\n        }]\n      ), [] as Array<card>)\n    )\n  }, [])\n\n  const addQueue = React.useCallback((type: cardType, temp?: boolean) => {\n    setQueue(queue => ([\n      ...queue,\n      {\n        type,\n        index: queue.length,\n        temp: temp === undefined ? false : true\n      }\n    ]))\n  }, [])\n\n  const updateQueue = React.useCallback((index: number, payload: card) => {\n    setQueue(queue => (queue.map(x => x.index === index ? x : {\n      ...x,\n      ...payload\n    })))\n  }, [])\n\n  const deleteQueue = React.useCallback((index: number) => {\n    reSortSetQueue(queue.filter(val => val.index !== index))\n  }, [reSortSetQueue, queue])\n\n  const deleteNextQueue = React.useCallback((index: number) => {\n    reSortSetQueue(queue.filter(val => val.index < index))\n  }, [reSortSetQueue, queue])\n\n  const replaceQueue = React.useCallback((draggingIndex:number, droppingIndex:number) => {\n    const movingQueue = queue.filter(x => x.index >= draggingIndex);\n    const putIndex = _.findIndex(queue, ['index', droppingIndex])\n\n    let changeQueue = queue.reduce((acc, val, index) => {\n      if (putIndex === index) acc = [...acc, ...movingQueue]\n      if (val.index >= draggingIndex) return acc;\n\n      return [...acc, val]\n    }, [] as Array<card>)\n\n    if (putIndex === -1) changeQueue = [...changeQueue, ...movingQueue]\n\n    setQueue(changeQueue)\n  }, [queue])\n\n  const setBluetoothDevice = React.useCallback(() => {\n    windowNavigator.bluetooth.requestDevice({\n      filters: [{ services: [0xFFE0] }]\n    })\n      .then(function(device: any) {\n        return device.gatt.connect();\n      })\n      .then(function(server: any) {\n        return server.getPrimaryService(0xFFE0);\n      })\n      .then(function(service: any) {\n        return service.getCharacteristic(0xFFE1);\n      })\n      .then(function(characteristic: any) {\n        setBluetoothConnect(true)\n        \n        var data = new Uint8Array([0xbb, 0x25, 0x05, 0x44]);\n        return characteristic.writeValue(data);\n      })\n      .catch(function(error: any) {\n        console.error('Connection failed!', error);\n      });\n  }, [])\n\n  const changeDraggingIndex = React.useCallback((index: number) => {\n    setDraggingIndex(index)\n  }, [])\n\n  return (\n    <GameContext.Provider value={{\n      queue,\n      tempQueue,\n      bluetoothConnect,\n      draggingIndex,\n\n      addQueue,\n      updateQueue,\n      deleteQueue,\n      deleteNextQueue,\n      replaceQueue,\n      reSortSetQueue,\n\n      setBluetoothDevice,\n\n      changeDraggingIndex\n    }}>\n      {children}\n    </GameContext.Provider>\n  )\n}","import React from 'react'\nimport styled from 'styled-components'\nimport GameContext from '../../contexts/GameContext'\n\nconst Button = styled.button<{ connect: boolean }>`\n  border: none;\n  background: none;\n\n  color: ${props => props.connect ? \"#0983fe\" : \"#000\"};\n  opacity: ${props => props.connect ? 1 : 0.2};\n\n  &:focus {\n    outline: none;\n  }\n`\n\nexport default function BluetoothButton() {\n  const { bluetoothConnect, setBluetoothDevice } = React.useContext(GameContext)\n  return (\n    <Button connect={bluetoothConnect} onClick={() => setBluetoothDevice()}>\n      <span className=\"material-icons\">bluetooth</span>\n    </Button>\n  )\n}","export default __webpack_public_path__ + \"static/media/start.6df7bebe.svg\";","export default __webpack_public_path__ + \"static/media/left-rotate.f9db7149.svg\";","export default __webpack_public_path__ + \"static/media/right-rotate.4443e6b6.svg\";","export default __webpack_public_path__ + \"static/media/go.b28a9fae.svg\";","import React from \"react\";\nimport styled from 'styled-components'\n\nimport startImg from '../../images/start.svg'\nimport leftRotateImg from '../../images/left-rotate.svg'\nimport rightRotateImg from '../../images/right-rotate.svg'\nimport goImg from '../../images/go.svg'\nimport { cardC } from \"../../types/card\";\n\nconst Item = styled.div`\n  position: relative;\n  width: 3.2rem;\n  height: 3rem;\n  font-size: 0;\n\n  img {\n    width: auto;\n    height: 100%;\n  }\n`\n\nexport default React.forwardRef(function Card({ type, ...props }: cardC, ref) {\n  return (\n    <Item {...props}>\n      {type === \"start\" && <img src={startImg} alt=\"시작 이미지\" />}\n      {type === \"go\" && <img src={goImg} alt=\"직진\"/>}\n      {type === \"left-rotate\" && <img src={leftRotateImg} alt=\"왼쪽으로 90도 회전\"/>}\n      {type === \"right-rotate\" && <img src={rightRotateImg} alt=\"오른쪽으로 90도 회전\"/>}\n    </Item>\n  )\n})","import React from 'react'\nimport { getEmptyImage } from 'react-dnd-html5-backend'\nimport { useDrag, DragSourceMonitor } from 'react-dnd'\n\nimport Card from './Card'\nimport { cardC } from '../../types/card'\n\ntype Props = {\n  val: number\n  begin?: () => void\n} & cardC \n\nexport default function DraggableCard({ type, val }: Props) {\n  const [{ isDragging }, drag, preview] = useDrag({\n    item: { type: \"card\", data: { type } },\n    collect: (monitor: DragSourceMonitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  })\n\n  React.useEffect(() => {\n    preview(getEmptyImage(), { captureDraggingState: true })\n  }, [])\n\n  return (\n    <div ref={drag}>\n      <Card type={type} />\n    </div>\n  )\n}\n","export default __webpack_public_path__ + \"static/media/play.b9298dae.svg\";","import React from 'react'\nimport { getEmptyImage } from 'react-dnd-html5-backend'\nimport { useDrag, DragSourceMonitor, XYCoord, useDrop } from 'react-dnd'\n\nimport Card from './Card'\nimport { cardSortEvent, draggableCard, sortCardC } from '../../types/card'\n\n\nexport default function SortableCard({\n  type, index, withDragging , moveCard, changeDraggingIndex, dropCard, updateCard }: sortCardC & cardSortEvent) {\n  const ref = React.useRef<HTMLDivElement>(null);\n  const [, drop] = useDrop({\n    accept: [\"card\", \"sortCard\"],\n    drop() {\n      dropCard()\n    },\n    hover(item: draggableCard, monitor) {\n      const dragIndex = item.index;\n      const hoverIndex = index;\n        \n      if (item.type === \"sortCard\") {\n        if (!ref.current) {\n          return;\n        }\n        const hoverBoundingRect = ref.current?.getBoundingClientRect();\n        const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n        const clientOffset = monitor.getClientOffset();\n        const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top;\n  \n        if (\n          (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) ||\n          (dragIndex > hoverIndex && hoverClientY > hoverMiddleY)\n        ) {\n          return;\n        }\n        \n        moveCard(dragIndex, hoverIndex)\n      } else if (item.type === \"card\") {\n        updateCard(hoverIndex);\n      }\n    }\n  });\n\n  const [{ isDragging }, drag, preview] = useDrag({\n    item: {\n      type: \"sortCard\",\n      index,\n      sort: true,\n      data: { type }\n    },\n    begin: (monitor: DragSourceMonitor) => {\n      changeDraggingIndex(index)\n    },\n    end: () => {\n      changeDraggingIndex(Infinity)\n    },\n    collect: (monitor: DragSourceMonitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  })\n\n  React.useEffect(() => {\n    preview(getEmptyImage(), { captureDraggingState: true })\n  }, [])\n\n  drag(drop(ref));\n\n  const opacity = (isDragging || withDragging) ? 0.5 : 1;\n\n  return (\n    <div ref={ref} style={{ opacity }}>\n      <Card type={type} />\n    </div>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { card, cardSortEvent } from '../../types/card'\nimport Card from './Card'\nimport SortableCard from './SortableCard'\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex: 1;\n  font-size: 0;\n`\n\ntype Props = {\n  cards: Array<card>,\n}\n\ntype SortProps = {\n  draggingIndex: number\n} & cardSortEvent & Props\n\nexport function SortCardList({ cards, draggingIndex, ...props }: SortProps) {\n  return (\n    <Wrapper>\n      {cards.map((val, k) => (\n        <div\n          key={val.index}\n          style={{\n            position: 'relative',\n            left: `${(k + 1) * -0.38}rem`,\n            opacity: val.temp ? 0.5 : 1,\n          }}\n        >\n          <SortableCard\n            {...props}\n            withDragging={val.index >= draggingIndex}\n            type={val.type}\n            index={k}\n          />\n        </div>\n      ))}\n    </Wrapper>\n  )\n}\n\nexport default function CardList({ cards }: Props) {\n  return (\n    <Wrapper>\n      {cards.map((val, k) => (\n        <div\n          key={k}\n          style={{\n            position: 'relative',\n            left: `${(k + 1) * -0.38}rem`\n          }}\n        >\n          <Card\n            type={val.type}\n          />\n        </div>\n      ))}\n    </Wrapper>\n  )\n}\n","import React from 'react'\nimport { useDrop } from 'react-dnd'\nimport styled from 'styled-components'\n\nimport { card, draggableCard } from '../../types/card'\nimport Card from '../card/Card'\n\nimport playImg from '../../images/play.svg'\nimport GameContext from '../../contexts/GameContext'\nimport { SortCardList } from '../card/CardList'\n\nconst QueueForm = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n`\n\nconst QueueWrapper = styled.div`\n  display: flex;\n  flex-wrap: nowrap;\n  width: 50%;\n  overflow: auto;\n\n  box-shadow: inset 1px 1px 1px rgba(0, 0, 0, .5);\n  border-radius: 100rem;\n\n  padding-top: .5rem;\n  padding-bottom: .5rem;\n  padding-left: .8rem;\n  padding-right: .8rem;\n\n  margin-right: 1rem;\n\n  background: #72d4c7;\n`\n\nconst Queue = styled.div`\n  flex: 1;\n  font-size: 0;\n`\n\nconst PlayBtn = styled.div`\n  position: relative;\n  z-index: 2;\n  width: 4rem;\n  height: 4rem;\n  border-radius: 50%;\n  font-size: 0;\n\n  &:before {\n    position: absolute;\n    z-index: -1;\n    left: 0;\n    bottom: -.25rem;\n    width: 100%;\n    height: 100%;\n\n    border-radius: 50%;\n\n    background: #db7e19;\n    content: '';\n  }\n`\n\nconst PlayBtnWrapper = styled.div<{pushing: boolean}>`\n  position: relative;\n  bottom: ${props => props.pushing ? '-0.25rem' : '0'};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  height: 100%;\n\n  background: #f6941b;\n  border-radius: 50%;\n\n  transition: 150ms ease;\n\n  img {\n    width: 30%;\n  }\n`\n\nexport default function QueueControl() {\n  const {\n      queue,\n      tempQueue,\n      draggingIndex,\n      addQueue, \n      updateQueue,\n      deleteQueue,\n      replaceQueue,\n      changeDraggingIndex,\n      reSortSetQueue\n  } = React.useContext(GameContext)\n  const [pushing, setPushing] = React.useState(false)\n\n  const [{ hovered, item }, drop] = useDrop({\n    accept: \"card\",\n    drop(item: draggableCard, monitor) {\n      reSortSetQueue(queue)\n      return undefined\n    },\n\n    collect: (monitor) => ({\n      hovered: monitor.isOver(),\n      item: monitor.getItem()\n    }),\n  })\n\n  React.useEffect(() => {\n    if (!tempQueue && hovered) {\n      addQueue(item.data.type, true)\n    } else if (tempQueue && !hovered) {\n      deleteQueue(tempQueue.index);\n    }\n  }, [item, addQueue, deleteQueue, tempQueue, hovered])\n\n  return (\n    <QueueForm>\n      <QueueWrapper>\n        <Card type=\"start\" />\n        <Queue ref={drop}>\n          <SortCardList\n            draggingIndex={draggingIndex}\n            cards={[...queue, {\n              type: 'temp',\n              index: queue.length,\n              temp: false,\n            }]}\n            updateCard={(index: number) => {\n              if (tempQueue) {\n                replaceQueue(tempQueue.index, index)\n              }\n            }}\n            dropCard={() => reSortSetQueue(queue)}\n            changeDraggingIndex={changeDraggingIndex}\n            moveCard={replaceQueue}\n            addingCard={(index: number) => {}}\n          />\n        </Queue>\n      </QueueWrapper>\n      <PlayBtn\n        onTouchStart={() => setPushing(true)}\n        onTouchEnd={() => setPushing(false)}\n      >\n        <PlayBtnWrapper pushing={pushing}>\n          <img src={playImg} alt=\"play\" />\n        </PlayBtnWrapper>\n      </PlayBtn>\n    </QueueForm>\n  )\n}\n","import React from \"react\";\nimport styled from 'styled-components'\n\nimport { useDrop } from 'react-dnd'\n\nimport { card, cardType, draggableCard } from \"../../types/card\";\n\nimport DraggableCard from \"../card/DraggableCard\";\nimport QueueControl from \"./QueueControl\";\nimport GameContext from \"../../contexts/GameContext\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n`\n\nconst ItemWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  box-shadow: inset 0px 1px 1px rgba(0, 0, 0, .5);\n\n  width: 100%;\n  padding-top: .5rem;\n  padding-bottom: .5rem;\n  background: #48baa4;\n\n  & > div {\n    margin-left: .2rem;\n    margin-right: .2rem;\n  }\n`\n\nconst usingCards: Array<cardType> = [\"go\", \"left-rotate\", \"right-rotate\"]\n\nexport default function Control() {\n  const { deleteNextQueue } = React.useContext(GameContext)\n  const [, drop] = useDrop({\n    accept: \"sortCard\",\n    drop(item: draggableCard) {\n      deleteNextQueue(item.index);\n      return undefined\n    },\n  })\n\n  return (\n    <Wrapper>\n      <QueueControl />\n      <ItemWrapper ref={drop}>\n        {usingCards.map((card, k) => (\n          <DraggableCard\n            val={k}\n            type={card}\n            key={k}\n          />\n        ))}\n      </ItemWrapper>\n    </Wrapper>\n  )\n}","import React from 'react'\nimport { XYCoord, useDragLayer } from 'react-dnd'\nimport GameContext from '../../contexts/GameContext'\nimport Card from '../card/Card'\nimport CardList from '../card/CardList'\n\nconst layerStyles: React.CSSProperties = {\n  position: 'fixed',\n  pointerEvents: 'none',\n  zIndex: 100,\n  left: 0,\n  top: 0,\n  width: '100%',\n  height: '100%',\n}\n\nfunction getItemStyles(\n  initialOffset: XYCoord | null,\n  currentOffset: XYCoord | null,\n  isSnapToGrid: boolean,\n) {\n  if (!initialOffset || !currentOffset) {\n    return {\n      display: 'none',\n    }\n  }\n\n  let { x, y } = currentOffset\n\n  const transform = `translate(${x}px, ${y}px)`\n\n  return {\n    transform,\n    WebkitTransform: transform,\n  }\n}\n\nexport interface CustomDragLayerProps {\n  snapToGrid: boolean\n}\n\nexport const CustomDragLayer: React.FC<CustomDragLayerProps> = (props) => {\n  const { queue, draggingIndex } = React.useContext(GameContext)\n\n  const {\n    itemType,\n    isDragging,\n    item,\n    initialOffset,\n    currentOffset,\n  } = useDragLayer((monitor) => ({\n    item: monitor.getItem(),\n    itemType: monitor.getItemType(),\n    initialOffset: monitor.getInitialSourceClientOffset(),\n    currentOffset: monitor.getSourceClientOffset(),\n    isDragging: monitor.isDragging(),\n  }))\n\n  function renderItem() {\n    switch (itemType) {\n      case \"card\":\n        return <Card type={item.data.type} />\n      case \"sortCard\":\n        return <CardList cards={queue.filter(x => x.index >= draggingIndex)} />\n      default:\n        return null\n    }\n  }\n\n  if (!isDragging) {\n    return null\n  }\n  return (\n    <div style={layerStyles}>\n      <div\n        style={getItemStyles(initialOffset, currentOffset, props.snapToGrid)}\n      >\n        {renderItem()}\n      </div>\n    </div>\n  )\n}\n","import React from \"react\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport { TouchBackend } from \"react-dnd-touch-backend\";\nimport styled from 'styled-components'\nimport { GameContextProvider } from \"../contexts/GameContext\";\nimport BluetoothButton from \"./game/BluetoothButton\";\n\nimport Control from \"./game/Control\";\nimport { CustomDragLayer } from \"./game/CustomDragLayer\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  width: 100%;\n  height: 100%;\n\n  background: #99eadf;\n`\n\nconst MapWrapper = styled.div`\n  position: relative;\n  width: 100%;\n`\n\nconst ControlWrapper = styled.div`\n  width: 100%;\n`\n\nconst StatusBar = styled.div`\n  position: absolute;\n  right: 1rem;\n  top: 1rem;\n`\n\nexport default function Game() {\n\n  return (\n    <GameContextProvider>\n      <DndProvider backend={TouchBackend}>\n        <CustomDragLayer snapToGrid={false} />\n        <Wrapper>\n          <MapWrapper>\n            <StatusBar>\n              <BluetoothButton />\n            </StatusBar>\n          </MapWrapper>\n          <ControlWrapper>\n            <Control />\n          </ControlWrapper>\n        </Wrapper>\n      </DndProvider>\n    </GameContextProvider>\n  )\n}","import React from 'react';\nimport Game from './components/Game';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Game />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals(console.log);\n"],"sourceRoot":""}